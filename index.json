[{"categories":["LoveIt"],"content":"Hugo - **LoveIt** ä½¿ç”¨.","date":"2020-03-06","objectID":"/loveit/","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"#Hugo ä¸»é¢˜ LoveIt Hugo - LoveIt ä½¿ç”¨. h3,h1 { background : lightgray; } h3:hover { color : red; } ","date":"2020-03-06","objectID":"/loveit/:0:0","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"1.cloneä¸»é¢˜å¹¶æ›´æ–°é…ç½® 1.git clone LoveItåˆ°themes/ç›®å½• 2.ä¿®æ”¹config.tomé…ç½®,å°†LoveIt/sampleçš„config.tom cpåˆ°baseç›®å½• 3.ä¿®æ”¹config.tomé…ç½®,å»æ‰enå¯¹åº”çš„é…ç½®-å¦åˆ™éœ€è¦ä¸­è‹±æ–‡å„å†™ä¸€ç¯‡ vim themes/LoveIt/exampleSite/content/posts/theme-documentation-basics/index.zh-cn.md ","date":"2020-03-06","objectID":"/loveit/:0:1","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"2.å®˜æ–¹æ–‡æ¡£ æ‰“å¼€å°†LoveIt/sampleé¡µé¢: hugo server â€“source=exampleSite ä¾æ®å®˜æ–¹æ–‡æ¡£é…ç½® å®˜æ–¹é“¾æ¥ ","date":"2020-03-06","objectID":"/loveit/:0:2","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"3.å…¶ä»–tips hugo serve --disableFastRender --buildDrafts -e production draftå¼€å¯,productå¯ä»¥å¼€å¯commentç­‰ ç¤¾äº¤é“¾æ¥å‚è€ƒ: å›¾æ ‡ç­‰æ”¾åœ¨staticä¸‹ å¯ä»¥è‡ªå®šä¹‰ browserconfig.xml å’Œ site.webmanifest æ–‡ä»¶æ¥è®¾ç½® theme-color å’Œ background-color. staticä¸‹ ","date":"2020-03-06","objectID":"/loveit/:0:3","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"4.è‡ªå®šä¹‰æ ·å¼ åœ¨ assets/css/_override.scss ä¸­, ä½ å¯ä»¥è¦†ç›– themes/LoveIt/assets/css/_variables.scss ä¸­çš„å˜é‡ä»¥è‡ªå®šä¹‰æ ·å¼. ","date":"2020-03-06","objectID":"/loveit/:0:4","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"5.æœç´¢ todo content ","date":"2020-03-06","objectID":"/loveit/:0:5","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"6.å†…å®¹ç»„ç»‡ æ ‡ç­¾: - {{\u003c admonition note â€œæœ¬åœ°èµ„æºå¼•ç”¨â€ \u003e}} {{\u003c /admonition \u003e}} æ–‡æ¡£: vim themes/LoveIt/exampleSite/content/posts/theme-documentation-content/index.zh-cn.md æœ¬åœ°èµ„æºå¼•ç”¨ æœ‰ä¸‰ç§æ–¹æ³•æ¥å¼•ç”¨å›¾ç‰‡å’ŒéŸ³ä¹ç­‰æœ¬åœ°èµ„æº: ä½¿ç”¨é¡µé¢åŒ…ä¸­çš„é¡µé¢èµ„æº. ä½ å¯ä»¥ä½¿ç”¨é€‚ç”¨äº Resources.GetMatch çš„å€¼æˆ–è€…ç›´æ¥ä½¿ç”¨ç›¸å¯¹äºå½“å‰é¡µé¢ç›®å½•çš„æ–‡ä»¶è·¯å¾„æ¥å¼•ç”¨é¡µé¢èµ„æº. å°†æœ¬åœ°èµ„æºæ”¾åœ¨ assets ç›®å½•ä¸­, é»˜è®¤è·¯å¾„æ˜¯ /assets. å¼•ç”¨èµ„æºçš„æ–‡ä»¶è·¯å¾„æ˜¯ç›¸å¯¹äº assets ç›®å½•çš„. å°†æœ¬åœ°èµ„æºæ”¾åœ¨ static ç›®å½•ä¸­, é»˜è®¤è·¯å¾„æ˜¯ /static. å¼•ç”¨èµ„æºçš„æ–‡ä»¶è·¯å¾„æ˜¯ç›¸å¯¹äº static ç›®å½•çš„. å¼•ç”¨çš„ä¼˜å…ˆçº§ç¬¦åˆä»¥ä¸Šçš„é¡ºåº. åœ¨è¿™ä¸ªä¸»é¢˜ä¸­çš„å¾ˆå¤šåœ°æ–¹å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æœ¬åœ°èµ„æºå¼•ç”¨, ä¾‹å¦‚ é“¾æ¥, å›¾ç‰‡, image shortcode, music shortcode å’Œå‰ç½®å‚æ•°ä¸­çš„éƒ¨åˆ†å‚æ•°. é¡µé¢èµ„æºæˆ–è€… assets ç›®å½•ä¸­çš„å›¾ç‰‡å¤„ç†ä¼šåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¾—åˆ°æ”¯æŒ. éå¸¸é…·çš„åŠŸèƒ½! ","date":"2020-03-06","objectID":"/loveit/:0:6","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"7.å‰ç½®å‚æ•° å®˜æ–¹å‚è€ƒ ","date":"2020-03-06","objectID":"/loveit/:0:7","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"8.æ‘˜è¦,é»˜è®¤æå–,å¯æ‰‹åŠ¨è®¾ç½® \u003c!â€“moreâ€“\u003e ","date":"2020-03-06","objectID":"/loveit/:0:8","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"9.markdownè¯­æ³•æ‰©å±• ","date":"2020-03-06","objectID":"/loveit/:0:9","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"10.emoji ğŸ˜„ ","date":"2020-03-06","objectID":"/loveit/:0:10","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"11.å…¬å¼ ","date":"2020-03-06","objectID":"/loveit/:0:11","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"12.shortcut shortcutå®˜æ–¹ ä¹Ÿå¯ä»¥styleåŠ å…¥cssæ§åˆ¶ style link image admonition mermaid echarts bilibili... mapbox ","date":"2020-03-06","objectID":"/loveit/:0:12","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"13.hugoè·å–èµ„æº,æ¯”å¦‚imag \u003ca href=https://gohugo.io/content-management/image-processing/#image-resources\u003eå®˜ç½‘é“¾æ¥\u003c/a\u003eimage resè·å–ä½ç½® \" å®˜ç½‘é“¾æ¥ å¿…é¡»indexå¼€å¤´çš„mdæ‰èƒ½è·å–å½“å‰ç›®å½•çš„æ–‡ä»¶,å¦åˆ™åº”è¯¥æ”¾åœ¨å…¨å±€ /asserts/images/ä¸‹; ä¸è¿‡å‰ç½®å‚æ•°resource.name .imageæ–¹å¼ä¸èƒ½è·å– postsä¸‹ä¸€ä¸ªç›®å½•:å¦‚æœæœ‰index.mdåªèƒ½æœ‰ä¸€ä¸ªç”Ÿæ•ˆ,çˆ¶dirä¹Ÿä¸è¡Œ todo é¡µé¢èµ„æºä»…ä»…å¯ç”±é¡µé¢åŒ…å¯ä»¥è®¿é—®ï¼Œ é¡µé¢åŒ…å°±æ˜¯ä¸€ä¸ªæ ¹éƒ¨åŒ…å«index.md, æˆ–è€… _index.mdæ–‡ä»¶çš„ç›®å½•ã€‚èµ„æºä»…ä»…ä¸å®ƒä»¬æ‰€å±çš„æœ€ä½å±‚çº§çš„é¡µé¢ç»‘å®šã€‚å¯¹äºä¸åŒ…å«index.md çš„ç›®å½•ä¸é™„å±ä»»ä½•èµ„æºã€‚ å‚è€ƒ æ¯”å¦‚: ![img](/images/huisu.png) {{ $image := resources.Get \"/images/huisu.png\" }} Lighthouse (image)\" Lighthouse (image) . â”œâ”€â”€ db â”‚ â”œâ”€â”€ index2.md ---\u003eå¦‚æœæ˜¯index,åˆ™å½“å‰ç›®å½•åŠå­ç›®å½•åªèƒ½æ¸²æŸ“ä¸€ä¸ªhtml â”‚ â”œâ”€â”€ libc.jpg â”‚ â””â”€â”€ sqlite â”‚ â”œâ”€â”€ libc.jpg â”‚ â”œâ”€â”€ sqite2 â”‚ â”‚ â””â”€â”€ index.md ---\u003e index.mdç†è®ºä¸Šåªåº”è¯¥æ”¾åœ¨æœ€ä½å±‚ç›®å½•,ä¸”åªæœ‰ä¸€ä¸ªmd â”‚ â”œâ”€â”€ x.md â”‚ â””â”€â”€ xx.md â”œâ”€â”€ loveit â”‚ â”œâ”€â”€ featured-image.jpg â”‚ â”œâ”€â”€ hugo_image_res.png â”‚ â””â”€â”€ index.md â””â”€â”€ tpl.md ","date":"2020-03-06","objectID":"/loveit/:0:13","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"14.comment (æœªå¤‡æ¡ˆæç¤ºå¿½ç•¥) 1.https://valine.js.org/quickstart.html æ³¨å†Œï¼Œç„¶åF.ï¼› ä¼šç”Ÿæˆappidï¼Œkey 2.ä¿®æ”¹ vi themes/next/_config.yml ï¼› ä¿®æ”¹valine å¼€å¯trueï¼ŒæŠŠkeyåŠ ä¸Š 3.æœ€åï¼è®°å¾—åœ¨Leancloud -\u003e è®¾ç½® -\u003e å®‰å…¨ä¸­å¿ƒ -\u003e Web å®‰å…¨åŸŸå æŠŠä½ çš„åŸŸååŠ è¿›å»(åŸŸåæŒ‰æç¤ºé…ç½®cname) 4.å¯è®¾ç½®å›¾åƒ,åˆ°valineæœAvtaræœ‰è¯¦ç»†è¯´æ˜,åœ¨è¯„è®ºæ—¶æŒ‡å®šå¯¹åº”é‚®ç®±ä¼šè‡ªåŠ¨æ›´æ–°å›¾åƒ 5.valineä¸éœ€è¦åœ¨åŸŸåé‡Œæ·»åŠ ä»»ä½•dnsä¿¡æ¯ Tip: è´­ä¹°åŸŸååï¼š'Code 403: è®¿é—®è¢«APIåŸŸåç™½åå•æ‹’ç»ï¼Œè¯·æ£€æŸ¥çš„å®‰å…¨åŸŸåè®¾ç½®. æœ€åä¸€æ­¥ï¼Œwebå®‰å…¨åŸŸååŠ å…¥ï¼Œå½•å…¥çš„apiè®¿é—®æç¤ºæœªå¤‡æ¡ˆå¯ä»¥å¿½ç•¥ webå®‰å…¨åŸŸåï¼šçœ‹æµè§ˆå™¨æ˜¾ç¤ºçš„æ˜¯ä»€ä¹ˆåŠ ä»€ä¹ˆ:æ¯”å¦‚https://www.feng1o.comï¼› æ²¡wwwä¸è¡Œ ","date":"2020-03-06","objectID":"/loveit/:0:14","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"15.seo å‚è€ƒ google: https://search.google.com/search-console/sitemaps?resource_id=https%3A%2F%2Ffeng1o.github.io%2F å°†ä¸€ä¸ªhtmlæ”¾åœ¨staticä¸‹,ç„¶ååŠ å…¥sitemap.xml baidu: åŒæ ·æ”¯æŒhtml,å’Œsitemapæäº¤(ä¸å¯åµŒå¥—sitemapçš„xmlï¼Œæäº¤æœ€ä½å±‚çš„å³å¯) ç”¨çš„è¿™ä¸ªï¼šhttps://feng1o.com/feng1o_domain/sitemap.xml add ä½¿ç”¨åŸŸåç»‘å®šï¼Œéœ€è¦åœ¨åŸŸåç®¡ç†å’Œgithubçš„ä»“åº“è®¾ç½®é‡ŒåŠ å…¥åŸŸå å‚è€ƒ è°·æ­ŒåŠ æ–°åŸŸåï¼Œsitemap ç™¾åº¦å› ä¸ºæ— æ³•çˆ¬å–githubï¼Œé¡¾éœ€è¦ä½¿ç”¨vercel å‚è€ƒ Tip: ä½¿ç”¨åŸŸåç»‘å®šï¼Œéœ€è¦åœ¨åŸŸåç®¡ç†å’Œgithubçš„ä»“åº“è®¾ç½®é‡ŒåŠ å…¥åŸŸå è°·æ­ŒåŠ æ–°åŸŸåï¼Œsitemap ç™¾åº¦å› ä¸ºæ— æ³•çˆ¬å–githubï¼Œé¡¾éœ€è¦ä½¿ç”¨vercel å‚è€ƒ ","date":"2020-03-06","objectID":"/loveit/:0:15","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"16.æ›´æ–°err a.new pc: failed to extract shortcode: template for shortcode \"admonition\" not found --\u003e theme/Loveitä¸‹çš„ä¸»é¢˜éœ€è¦é‡æ–°cloneä¸‹ b.hugo server #debug c.src doc in branch devï¼› and gen source in publich and then push to master branchã€‚ ","date":"2020-03-06","objectID":"/loveit/:0:16","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["LoveIt"],"content":"17.è®°å½• a.archetypes/default.md é»˜è®¤çš„æ–‡ç« æ¨¡æ¿, å¯å®šåˆ¶ b. ","date":"2020-03-06","objectID":"/loveit/:0:17","tags":["LoveIt","ä¸»é¢˜"],"title":"ä¸»é¢˜æ–‡æ¡£ - ä½¿ç”¨LoveIt","uri":"/loveit/"},{"categories":["algorithm"],"content":"åˆ†ç±»(algorithm) - **ç®—æ³•`å›æº¯`** .","date":"2023-03-04","objectID":"/01.%E5%9B%9E%E6%BA%AF/","tags":["å›æº¯","algorithm"],"title":"01.å›æº¯ç®—æ³•æ¢³ç†","uri":"/01.%E5%9B%9E%E6%BA%AF/"},{"categories":["algorithm"],"content":"#Algorithm ç®—æ³• Algorithm - å›æº¯ learn. h6,h5,h4,h3,h2,h1 { background : lightgray; } h6,h5,h4,h3,h2,h1:hover { color : red; } summary-backtrack-labuladong \u0026\u0026 å›æº¯ç»†åˆ† id:: fa46fb8b-f417-4457-aae7-bcfacfda375d é€’å½’å›æº¯åŒºåˆ«:å›æº¯ä¹Ÿç”¨åˆ°é€’å½’ï¼Œä½†æ˜¯ç›¸æ¯”é€’å½’å¤šäº†æ¡ä»¶å‰ªçº¸ï¼Œç»“æŸæ¡ä»¶ç­‰ï¼› è€Œé€’å½’å°±æ˜¯å›è°ƒè‡ªèº«ï¼Œæ–æ³¢é‚£å¥‘æ•°åˆ—ä¸ºä¾‹ï¼Œä¸å­˜åœ¨å‘ç°ç»“æœä¸å¯¹å€’å›å»çš„æ­¥éª¤ï¼› å›æº¯æ¯”å¦‚ä¸€ä¸ªæ ¼å­é‡Œèµ°å‡ºå»ï¼Œèµ°ä¸é€šäº†å›å»ç»§ç»­æ¢ä¸ªè·¯åŠ²ï¼Œä¸€èˆ¬è¦æœ‰ä¸ªçŠ¶æ€è®°å½•èµ°è¿‡çš„ id:: 9374c530-4426-441e-8048-2362e98c3b7b id:: 63f7088c-681a-4fae-a9f0-3712420bbe3c result = [] def backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨): if æ»¡è¶³ç»“æŸæ¡ä»¶: // ç»„åˆçš„è¿™alléƒ½æ»¡è¶³ï¼Œå…¥å£å°±æ˜¯ç©ºä¹Ÿæ˜¯ result.add(è·¯å¾„) return for é€‰æ‹© in é€‰æ‹©åˆ—è¡¨: // å‰ªæ: æ¯”å¦‚åŒå…ƒç´ çš„ç»„åˆ x\u003estart nums[x]=numx[x-1] è·³è¿‡ åšé€‰æ‹© backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨) æ’¤é”€é€‰æ‹© id:: 63fc2cd5-d8c2-4e77-8486-b5713111d5bb #+BEGIN_QUERY {:title [:h5.font-bold.blue.opacity-40\"3. query (and BFS (and dalg (not tpl)) )\"] :query (and â€œå›æº¯â€ (and â€œdalgâ€ (not â€œtplâ€)) ) :result-transform (fn [result] (sort-by( fn [h] (get h :db/id 1) ) \u003e result)) :breadcrumb-show? false :collapsed? true } #+END_QUERY leetcode â€“ backtrace [[2023-02-23 Thu]] id:: 62360062-8288-4366-a172-6bcfff419cd2 78.å­é›† dalghot100 ä¸€ç³»åˆ—é—®é¢˜-tip-hot100 [[2022-11-30 Wed]] å›æº¯å›æº¯1 - \u003e\u003cspan class=\"width-55-hide bg-lightgray-del\"\u003e æ’åˆ—ç»„åˆå­é›†-æ±‡æ€» \u003cspan class=\"hide\"\u003edalg\u003c/span\u003e \u003cspan class=\"gray subw9\"\u003e -tip- \u003c/span\u003e\u003c/span\u003e\u003c/a\u003e \u003ca class=\"indent1 subw8 blue width-13-hide \" \u003eğŸ˜\u003c/a\u003e\u003ca class=\"indent1 subw8 gray width-18-hide underline DarkOrchid \" \u003eğŸ˜­æ±‡æ€»\u003c/a\u003e\u003ca class=\"indent1 subw gray width-3-hide underline red \" \u003e0\u003c/a\u003e \u003c/html\u003e nå†…çš„kä¸ªæ•°ç»„åˆ ç»„åˆå’Œæ’åˆ—åŒºåˆ«ï¼Œåœ¨forå¾ªç¯å¤„ç†ï¼Œæ’åˆ—allï¼Œéœ€è¦è¯†åˆ«visitedï¼Œç»„åˆéœ€å»é‡(starté¡ºåºå») å­é›†II æœ‰é‡å¤ã€ä¸å¯å¤é€‰çš„ç»„åˆã€æ’åˆ—é—®é¢˜ x=start; num =nums[x-1]å¿½ç•¥ ç»„åˆå’Œç­‰äºtarget æœ‰é‡å¤ã€ä¸å¯å¤é€‰çš„ç»„åˆã€æ’åˆ—é—®é¢˜ [[$red]]==ç»„åˆé—®é¢˜å’Œå­é›†é—®é¢˜ç­‰ä»·== å‚è€ƒæ­¤é¡µ ç”µè¯å·ç çš„å­—å¹•ç»„åˆ â€” å’Œæ— é‡å¤æ•°å­—ç»„åˆä¸€æ ·ï¼Œä»0å·å¼€å§‹ï¼Œæ‰«å®Œè¿›å…¥ä¸‹ä¸€è½®ï¼Œç»“æŸå°±æ˜¯nåˆ°äº†size æ‹¬å·ç”Ÿæˆ æ‹¬å·ç”Ÿæˆè¿™ä¸ªç†è§£ â€” https://leetcode.cn/problems/permutations/ 46.ä¸åŒå…ƒç´ çš„å…¨æ’åˆ— dalg -tip- å›æº¯å’Œå­é›†æ¯”ï¼1 - 47. æœ‰ç›¸åŒå…ƒç´ çš„å…¨æ’åˆ— https://leetcode.cn/problems/n-queens/ 5.nçš‡åé—®é¢˜ dalg -tip- å›æº¯å›æº¯å¯¹æ¯”0 ","date":"2023-03-04","objectID":"/01.%E5%9B%9E%E6%BA%AF/:0:0","tags":["å›æº¯","algorithm"],"title":"01.å›æº¯ç®—æ³•æ¢³ç†","uri":"/01.%E5%9B%9E%E6%BA%AF/"},{"categories":["go"],"content":"åˆ†ç±»(go) - **go`çŸ¥è¯†ç‚¹`** .","date":"2023-03-03","objectID":"/01.go_interview2/","tags":["go"],"title":"goçŸ¥è¯†ç‚¹æ¢³ç†","uri":"/01.go_interview2/"},{"categories":["go"],"content":" h7,h6,h5,h4,h3,h2,h1 { background : lightgray; } h7,h6,h5,h4,h3,h2,h1:hover { color : red; } map [[2023-02-20 Mon]] # æœ€ä¸»è¦çš„æ•°æ®ç»“æ„æœ‰ä¸¤ç§ï¼šå“ˆå¸ŒæŸ¥æ‰¾è¡¨ï¼ˆHash tableï¼‰ã€æœç´¢æ ‘ï¼ˆSearch treeï¼‰ avlæˆ–rbæ ‘ã€‚ Go è¯­è¨€é‡‡ç”¨çš„æ˜¯é“¾è¡¨è§£å†³å“ˆå¸Œå†²çªã€‚ 1.9.2 map å†…å­˜æ¨¡å‹ # ã€å¼•ç”³1ã€‘slice å’Œ map åˆ†åˆ«ä½œä¸ºå‡½æ•°å‚æ•°æ—¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ â€“ sliceè¿”å›çš„æ˜¯ç»“æ„ä½“ mapæ˜¯æŒ‡é’ˆ bmap å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€œæ¡¶â€ï¼Œæ¡¶é‡Œé¢ä¼šæœ€å¤šè£… 8 ä¸ª keyï¼Œè¿™äº› key ä¹‹æ‰€ä»¥ä¼šè½å…¥åŒä¸€ä¸ªæ¡¶ï¼Œç¬¬ä¹ä¸ªå°±ä¼šæ–°åŠ é€šè¿‡overflowè¿èµ·æ¥ æ¯ä¸ªbucketå†…éƒ¨key å’Œvalueæ˜¯åˆ†å¼€æ”¾çš„ï¼Œä¸æ˜¯ä¸€ç»„ä¸€ç»„æ”¾ mapåœ¨æ‰©å®¹çš„æ—¶å€™ï¼Œè¦æ¬è¿éƒ¨åˆ†bucketï¼Œå¯èƒ½å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œ ä»€ä¹ˆæ—¶å€™æ‰©å®¹ï¼Ÿ å£®å“‰å› å­è¶…è¿‡ é˜ˆå€¼6.5ï¼Œ overflowçš„bucketè¿‡å¤š keyä¸ºä»€ä¹ˆæ˜¯æ— åºçš„ï¼Ÿ æ‰©å®¹åä¼šæ¬ï¼Œkeyä½ç½®ä¼šå˜åŠ¨å¾ˆå¤§ï¼› è¿˜ä¸€ä¸ªæ¯æ¬¡for éå†æ—¶goä¹Ÿæ˜¯ä»ä¸€ä¸ªéšæœºåºå·å¼€å§‹çš„ mapä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€éå†è¿‡ç¨‹åˆ é™¤åŠ éƒ½å¯èƒ½æœ‰é—®é¢˜ sync.RWMutex æ— æ³•å¯¹mapçš„key valueå–åœ°å€ï¼Œå³æ—¶é€šè¿‡unsafe.pointeræ‹¿åˆ°ï¼Œä¹Ÿå¯èƒ½ä¼šå˜äº† interface# goçš„æ¥å£æœ‰ä»€ä¹ˆç‰¹ç‚¹: å¼•å…¥äº†ä¸è¦æ±‚ç±»å‹æ˜¾ç¤ºåœ°å£°æ˜å®ç°äº†æŸä¸ªæ¥å£ï¼Œåªè¦å®ç°äº†ç›¸å…³çš„æ–¹æ³•å³å¯ iface å’Œ eface éƒ½æ˜¯ Go ä¸­æè¿°æ¥å£çš„åº•å±‚ç»“æ„ä½“ï¼ŒåŒºåˆ«åœ¨äº iface æè¿°çš„æ¥å£åŒ…å«æ–¹æ³•ï¼Œè€Œ eface åˆ™æ˜¯ä¸åŒ…å«ä»»ä½•æ–¹æ³•çš„ç©ºæ¥å£ï¼šinterface{} iface å†…éƒ¨ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆï¼Œtab æŒ‡å‘ä¸€ä¸ª itab å®ä½“ dataæŒ‡å‘å…·ä½“çš„å€¼ tab æ˜¯æ¥å£è¡¨æŒ‡é’ˆï¼ŒæŒ‡å‘ç±»å‹ä¿¡æ¯ï¼›data æ˜¯æ•°æ®æŒ‡é’ˆï¼Œåˆ™æŒ‡å‘å…·ä½“çš„æ•°æ®ã€‚å®ƒä»¬åˆ†åˆ«è¢«ç§°ä¸ºåŠ¨æ€ç±»å‹å’ŒåŠ¨æ€å€¼ã€‚è€Œæ¥å£å€¼åŒ…æ‹¬åŠ¨æ€ç±»å‹å’ŒåŠ¨æ€å€¼ # eface å°±æ¯”è¾ƒç®€å•äº†ã€‚åªç»´æŠ¤äº†ä¸€ä¸ª _type å­—æ®µï¼Œè¡¨ç¤ºç©ºæ¥å£æ‰€æ‰¿è½½çš„å…·ä½“çš„å®ä½“ç±»å‹ã€‚data æè¿°äº†å…·ä½“çš„å€¼ ç¼–è¯‘æœŸè‡ªåŠ¨æ£€æµ‹æ˜¯å¦å®ç°äº†æ¥å£ # var _ io.Writer = (*myWriter)(nil) var _ io.Writer = myWriter{} // æ£€æŸ¥ myWriter ç±»å‹æ˜¯å¦å®ç°äº† io.Writer æ¥å£ ç±»å‹è½¬æ¢å’Œæ–­è¨€åŒºåˆ« ç±»å‹è½¬æ¢ã€ç±»å‹æ–­è¨€æœ¬è´¨éƒ½æ˜¯æŠŠä¸€ä¸ªç±»å‹è½¬æ¢æˆå¦å¤–ä¸€ä¸ªç±»å‹ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œç±»å‹æ–­è¨€æ˜¯å¯¹æ¥å£å˜é‡è¿›è¡Œçš„æ“ä½œ Goæ¥å£å’Œc++æ¥å£æœ‰å’Œå¼‚åŒ # C++ é€šè¿‡è™šå‡½æ•°è¡¨æ¥å®ç°åŸºç±»è°ƒç”¨æ´¾ç”Ÿç±»çš„å‡½æ•°ï¼›è€Œ Go é€šè¿‡ itab ä¸­çš„ fun å­—æ®µæ¥å®ç°æ¥å£å˜é‡è°ƒç”¨å®ä½“ç±»å‹çš„å‡½æ•° channel # ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè€Œè¦é€šè¿‡é€šä¿¡æ¥å®ç°å†…å­˜å…±äº«ã€‚ è¿™å°±æ˜¯ Go çš„å¹¶å‘å“²å­¦ï¼Œå®ƒä¾èµ– CSP æ¨¡å‹ï¼ŒåŸºäº channel å®ç° # æ•°æ®ç»“æ„ # buf æŒ‡å‘åº•å±‚å¾ªç¯æ•°ç»„(ç¼“å†²channel)ï¼Œ sendq recvq è¡¨ç¤ºè¢«é˜»å¡çš„goroutineï¼Œ sendx recvx å‘é€æ¥æ”¶msgç›¸å¯¹ä½ç½® å‘channelå‘é€æ•°æ®è¿‡ç¨‹æ€ä¹ˆæ ·çš„? a.æ£€æŸ¥æ¥æ”¶çš„channelæ˜¯å¦åˆæ³•ã€æ¯”å¦‚nilç›´æ¥è¿”å›fasleï¼Œgoroutine æŒ‚èµ· b.å¯¹äºä¸é˜»å¡çš„å‘é€æ“ä½œï¼Œå¦‚æœ channel æœªå…³é—­å¹¶ä¸”æ²¡æœ‰å¤šä½™çš„ç¼“å†²ç©ºé—´ å¦‚æœchannelå·²closeï¼Œpanic å¦‚æœèƒ½ä»ç­‰å¾…æ¥æ”¶é˜Ÿåˆ— recvq é‡Œå‡ºé˜Ÿä¸€ä¸ª sudogï¼ˆä»£è¡¨ä¸€ä¸ª goroutineï¼‰ï¼Œè¯´æ˜æ­¤æ—¶ channel æ˜¯ç©ºçš„ï¼Œæ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥æ‰ä¼šæœ‰ç­‰å¾…æ¥æ”¶è€…ã€‚è¿™æ—¶ä¼šè°ƒç”¨ send å‡½æ•°å°†å…ƒç´ ç›´æ¥ä»å‘é€è€…çš„æ ˆæ‹·è´åˆ°æ¥æ”¶è€…çš„æ ˆï¼Œå…³é”®æ“ä½œç”± sendDirect å‡½æ•°å®Œæˆ å¦‚æœæ²¡æœ‰å‘½ä¸­ä»¥ä¸Šæ¡ä»¶çš„ï¼Œè¯´æ˜ channel å·²ç»æ»¡äº†ï¼Œé˜»å¡èµ·æ¥ã€‚ è¿™é‡Œæœ‰ä¸€äº›ç»‘å®šæ“ä½œï¼Œsudog é€šè¿‡ g å­—æ®µç»‘å®š goroutineï¼Œè€Œ goroutine é€šè¿‡ waiting ç»‘å®š sudogï¼Œsudog è¿˜é€šè¿‡ elem å­—æ®µç»‘å®šå¾…å‘é€å…ƒç´ çš„åœ°å€ï¼Œä»¥åŠ c å­—æ®µç»‘å®šè¢«â€œå‘â€åœ¨æ­¤å¤„çš„ channelã€‚ æ‰€ä»¥ï¼Œå¾…å‘é€çš„å…ƒç´ åœ°å€å…¶å®æ˜¯å­˜å‚¨åœ¨ sudog ç»“æ„ä½“é‡Œï¼Œä¹Ÿå°±æ˜¯å½“å‰ goroutine é‡Œã€‚ ä»channelè¯»å–æ•°æ®æ€ä¹ˆæ ·çš„ï¼Ÿ å¦‚æœ channel æ˜¯ä¸€ä¸ªç©ºå€¼ï¼ˆnilï¼‰ï¼Œåœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œä¼šç›´æ¥è¿”å› å’Œå‘é€å‡½æ•°ä¸€æ ·ï¼Œæ¥ä¸‹æ¥æäº†ä¸€ä¸ªåœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œä¸ç”¨è·å–é”ï¼Œå¿«é€Ÿæ£€æµ‹åˆ°å¤±è´¥å¹¶ä¸”è¿”å›çš„æ“ä½œã€‚ (æ²¡å‡†å¤‡å¥½: éç¼“å†²çš„å‘é€é˜Ÿåˆ—é‡Œæ²¡goroutineï¼Œç¼“å†²æ€§bufferæ˜¯ç©ºçš„ â€” \u003e éƒ½è¯´æ˜æ²¡æ•°æ®å¯æ“ä½œ) æ¥ä¸‹æ¥çš„æ“ä½œï¼Œé¦–å…ˆä¼šä¸Šä¸€æŠŠé”ï¼Œç²’åº¦æ¯”è¾ƒå¤§ã€‚ æ¥ä¸‹æ¥ï¼Œå¦‚æœæœ‰ç­‰å¾…å‘é€çš„é˜Ÿåˆ—ï¼Œè¯´æ˜ channel å·²ç»æ»¡äº†ï¼Œè¦ä¹ˆæ˜¯éç¼“å†²å‹çš„ channelï¼Œè¦ä¹ˆæ˜¯ç¼“å†²å‹çš„ channelï¼Œä½† buf æ»¡äº†ã€‚è¿™ä¸¤ç§æƒ…å†µä¸‹éƒ½å¯ä»¥æ­£å¸¸æ¥æ”¶æ•°æ®ã€‚ æœ€åï¼Œå–å‡º sudog é‡Œçš„ goroutineï¼Œè°ƒç”¨ goready å°†å…¶çŠ¶æ€æ”¹æˆ â€œrunnableâ€ï¼Œå¾…å‘é€è€…è¢«å”¤é†’ï¼Œç­‰å¾…è°ƒåº¦å™¨çš„è°ƒåº¦ã€‚ å…³é—­goroutineè¿‡ç¨‹ close é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œå¯¹äºä¸€ä¸ª channelï¼Œrecvq å’Œ sendq ä¸­åˆ†åˆ«ä¿å­˜äº†é˜»å¡çš„å‘é€è€…å’Œæ¥æ”¶è€…ã€‚å…³é—­ channel åï¼Œå¯¹äºç­‰å¾…æ¥æ”¶è€…è€Œè¨€ï¼Œä¼šæ”¶åˆ°ä¸€ä¸ªç›¸åº”ç±»å‹çš„é›¶å€¼ã€‚å¯¹äºç­‰å¾…å‘é€è€…ï¼Œä¼šç›´æ¥ panicã€‚æ‰€ä»¥ï¼Œåœ¨ä¸äº†è§£ channel è¿˜æœ‰æ²¡æœ‰æ¥æ”¶è€…çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è´¸ç„¶å…³é—­ channelã€‚ å…³é—­çš„chanèƒ½è¯»å–bufferé‡Œçš„æ•°æ®ï¼Œå› ä¸ºè¯»å–æ—¶åˆ¤å®šè¿‡ç¨‹æ˜¯æœ‰bufferçš„æ— æ•°æ®å¹¶closeçš„æ‰ä¼šç«‹å³è¿”å› [[2023-02-28 Tue]] æ“ä½œchannelæ€»ç»“ æ€»ç»“ä¸€ä¸‹ï¼Œå‘ç”Ÿ panic çš„æƒ…å†µæœ‰ä¸‰ç§ï¼šå‘ä¸€ä¸ªå…³é—­çš„ channel è¿›è¡Œå†™æ“ä½œï¼›å…³é—­ä¸€ä¸ª nil çš„ channelï¼›é‡å¤å…³é—­ä¸€ä¸ª channelã€‚ è¯»ã€å†™ä¸€ä¸ª nil channel éƒ½ä¼šè¢«é˜»å¡ã€‚ å¦‚ä½•ä¼˜é›…å…³é—­channel æœ‰ä¸¤ä¸ªä¸é‚£ä¹ˆä¼˜é›…åœ°å…³é—­ channel çš„æ–¹æ³•ï¼š ä½¿ç”¨ defer-recover æœºåˆ¶ï¼Œæ”¾å¿ƒå¤§èƒ†åœ°å…³é—­ channel æˆ–è€…å‘ channel å‘é€æ•°æ®ã€‚å³ä½¿å‘ç”Ÿäº† panicï¼Œæœ‰ defer-recover åœ¨å…œåº•ã€‚ ä½¿ç”¨ sync.Once æ¥ä¿è¯åªå…³é—­ä¸€æ¬¡ã€‚ å¼•å…¥ä¸€ä¸ªä¸­é—´è€…: channel é€šçŸ¥goroutineå…³é—­ï¼Œæœ€ç»ˆæœ‰ä¸€ä¸ªä¸»close channelæ³„éœ² æ³„æ¼çš„åŸå› æ˜¯ goroutine æ“ä½œ channel åï¼Œå¤„äºå‘é€æˆ–æ¥æ”¶é˜»å¡çŠ¶æ€ï¼Œè€Œ channel å¤„äºæ»¡æˆ–ç©ºçš„çŠ¶æ€ï¼Œä¸€ç›´å¾—ä¸åˆ°æ”¹å˜ã€‚åŒæ—¶ï¼Œåƒåœ¾å›æ”¶å™¨ä¹Ÿä¸ä¼šå›æ”¶æ­¤ç±»èµ„æºï¼Œè¿›è€Œå¯¼è‡´ gouroutine ä¼šä¸€ç›´å¤„äºç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œä¸è§å¤©æ—¥ã€‚ å¦å¤–ï¼Œç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹äºä¸€ä¸ª channelï¼Œå¦‚æœæ²¡æœ‰ä»»ä½• goroutine å¼•ç”¨äº†ï¼Œgc ä¼šå¯¹å…¶è¿›è¡Œå›æ”¶æ“ä½œï¼Œä¸ä¼šå¼•èµ·å†…å­˜æ³„æ¼ channelå¼•ç”¨æœ‰å“ªäº›ï¼Ÿ # åœæ­¢ä¿¡å· ä»»åŠ¡å®šæ—¶ # è§£è€¦ç”Ÿäº§æ–¹å’Œæ¶ˆè´¹æ–¹ # æ§åˆ¶å¹¶å‘æ•° # context # GC 1.åŸºç¡€ 2. æ ¹å¯¹è±¡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ# æ ¹å¯¹è±¡ åœ¨åƒåœ¾å›æ”¶çš„æœ¯è¯­ä¸­åˆå«åšæ ¹é›†åˆï¼Œå®ƒæ˜¯åƒåœ¾å›æ”¶å™¨åœ¨æ ‡è®°è¿‡ç¨‹æ—¶æœ€å…ˆæ£€æŸ¥çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ï¼š å…¨å±€å˜é‡ï¼šç¨‹åºåœ¨ç¼–è¯‘æœŸå°±èƒ½ç¡®å®šçš„é‚£äº›å­˜åœ¨äºç¨‹åºæ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„å˜é‡ã€‚ æ‰§è¡Œæ ˆï¼šæ¯ä¸ª goroutine éƒ½åŒ…å«è‡ªå·±çš„æ‰§è¡Œæ ˆï¼Œè¿™äº›æ‰§è¡Œæ ˆä¸ŠåŒ…å«æŒ‡å‘åˆ†é…çš„å †å†…å­˜åŒºå—çš„æŒ‡é’ˆã€‚ å¯„å­˜å™¨ï¼šå¯„å­˜å™¨çš„å€¼å¯èƒ½è¡¨ç¤ºä¸€ä¸ªæŒ‡é’ˆï¼Œå‚ä¸è®¡ç®—çš„è¿™äº›æŒ‡é’ˆå¯èƒ½æŒ‡å‘æŸäº›èµ‹å€¼å™¨åˆ†é…çš„å †å†…å­˜åŒºå—ã€‚ 3. å¸¸è§çš„ GC å®ç°æ–¹å¼æœ‰å“ªäº›ï¼ŸGo è¯­è¨€çš„ GC ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆï¼Ÿ# ç®—æ³• å…¶å­˜åœ¨å½¢å¼å¯ä»¥å½’ç»“ä¸ºè¿½è¸ªï¼ˆTracingï¼‰å’Œå¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰è¿™ä¸¤ç§å½¢å¼çš„æ··åˆè¿ç”¨, [[è¿½è¸ªå¼GC]] ç‰¹ç‚¹ Go çš„ GC ç›®å‰ä½¿ç”¨çš„æ˜¯æ— åˆ†ä»£ï¼ˆå¯¹è±¡æ²¡æœ‰ä»£é™…ä¹‹åˆ†ï¼‰ã€ä¸æ•´ç†ï¼ˆå›æ”¶è¿‡ç¨‹ä¸­ä¸å¯¹å¯¹è±¡è¿›è¡Œç§»åŠ¨ä¸æ•´ç†ï¼‰ã€å¹¶å‘ï¼ˆä¸ç”¨æˆ·ä»£ç å¹¶å‘æ‰§è¡Œï¼‰çš„ä¸‰è‰²æ ‡è®°æ¸…æ‰«ç®—æ³•ã€ ä»æ ¹å¯¹è±¡å‡ºå‘ï¼Œæ ¹æ®å¯¹è±¡ä¹‹é—´çš„å¼•ç”¨ä¿¡æ¯ï¼Œä¸€æ­¥æ­¥æ¨è¿›ç›´åˆ°æ‰«æå®Œæ¯•æ•´ä¸ªå †å¹¶ç¡®å®šéœ€è¦ä¿ç•™çš„å¯¹è±¡ï¼Œä»è€Œå›æ”¶æ‰€æœ‰å¯å›æ”¶çš„å¯¹è±¡ã€‚Goã€ Javaã€V8 å¯¹ JavaScript çš„å®ç°ç­‰å‡ä¸ºè¿½è¸ªå¼ GC å¼•ç”¨è®¡æ•°å¼GC æ¯ä¸ªå¯¹è±¡è‡ªèº«åŒ…å«ä¸€ä¸ªè¢«å¼•ç”¨çš„è®¡æ•°å™¨ï¼Œå½“è®¡æ•°å™¨å½’é›¶æ—¶è‡ªåŠ¨å¾—åˆ°å›æ”¶ã€‚å› ä¸ºæ­¤æ–¹æ³•ç¼ºé™·è¾ƒå¤šï¼Œåœ¨è¿½æ±‚é«˜æ€§èƒ½æ—¶é€šå¸¸ä¸è¢«åº”ç”¨ã€‚Pythonã€Objective-C ç­‰å‡ä¸ºå¼•ç”¨è®¡æ•°å¼ GCï¼Œ å¿«ç®€å•ã€ä½†æ¯æ¬¡è¦è®¡ç®—å¼•ç”¨æ•°æ€§èƒ½å·®ï¼Œéœ€è¦é¢å¤–å†…å­˜è®°å½•å¼•ç”¨æ•° 4. ä¸‰è‰²æ ‡è®°æ³•æ˜¯ä»€ä¹ˆï¼Ÿ# å…³é”® ç†è§£å¯¹è±¡çš„ä¸‰è‰²æŠ½è±¡ä»¥åŠæ³¢é¢(wavefront)æ¨è¿›è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚ä¸‰è‰²æŠ½è±¡åªæ˜¯ä¸€ç§æè¿°è¿½è¸ªå¼å›æ”¶å™¨çš„æ–¹æ³•, ç™½è‰²:: è¦è¢«å›æ”¶çš„å¯¹è±¡ï¼Œä¸å¯è¾¾çš„ ç°è‰²:: ä¸­é—´å¸¦çš„ï¼Œå¯èƒ½è¢«å›æ”¶ï¼Œä¹Ÿå¯èƒ½å¯è¾¾å¯¹è±¡ é»‘è‰²:: å°±æ˜¯å¯è¾¾çš„ï¼Œä¸å¯å›æ”¶çš„ 5. STW æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ # å®šä¹‰:: stop the worldï¼Œå¼€å§‹gcçš„æ—¶å€™ä¼šåœæ­¢æ‰€æœ‰ç”¨æˆ·ä»£ç ï¼Œå¯¼è‡´åœæ­¢ 6. å¦‚ä½•è§‚å¯Ÿ Go GCï¼Ÿ# æ–¹å¼1ï¼š GODEBUG=gctrace=1 # æ–¹å¼2..4: go toolã€ runtime.memstateã€ gcstateä¿¡æ¯ wall clock æ˜¯æŒ‡å¼€å§‹æ‰§è¡Œåˆ°å®Œæˆæ‰€ç»å†çš„å®é™…æ—¶é—´ï¼ŒåŒ…æ‹¬å…¶ä»–ç¨‹åºå’Œæœ¬ç¨‹åºæ‰€æ¶ˆè€—çš„æ—¶é—´ï¼› cpu time æ˜¯æŒ‡ç‰¹å®šç¨‹åºä½¿ç”¨ CPU çš„æ—¶é—´ wall clock \u003c cpu time: {{cloze å……åˆ†åˆ©ç”¨å¤šæ ¸}} wall clock â‰ˆ cpu time: æœªå¹¶è¡Œæ‰§è¡Œ wall clock \u003e cpu time: å¤šæ ¸ä¼˜åŠ¿ä¸æ˜æ˜¾ 7. æœ‰äº† GCï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šå‘ç”Ÿå†…å­˜æ³„éœ²ï¼Ÿ","date":"2023-03-03","objectID":"/01.go_interview2/:0:0","tags":["go"],"title":"goçŸ¥è¯†ç‚¹æ¢³ç†","uri":"/01.go_interview2/"},{"categories":["go"],"content":" var _ io.Writer = (*myWriter)(nil) var _ io.Writer = myWriter{} // æ£€æŸ¥ myWriter ç±»å‹æ˜¯å¦å®ç°äº† io.Writer æ¥å£ ","date":"2023-03-03","objectID":"/01.go_interview2/:0:4","tags":["go"],"title":"goçŸ¥è¯†ç‚¹æ¢³ç†","uri":"/01.go_interview2/"},{"categories":["go"],"content":"xxxxxxxxxxxxxxxxxx weight: 6 title: â€œgoçŸ¥è¯†ç‚¹æ¢³ç†â€ date: 2023-03-03T19:10:14+08:00 draft: false # true will be not indexed in debug mode lastmod: 2023-03-03T19:10:14+08:00 author: â€œfeng1oâ€ authorLink: â€œhttps://feng1o.github.ioâ€ description: â€œåˆ†ç±»(go) - goçŸ¥è¯†ç‚¹ .â€ featuredImage: images/go.png # å¯¹åº”å›¾ç‰‡ #featuredImagePreview: /featuredImage/excel-featured-image.jpg tags: [â€œgoâ€] categories: [go] lightgallery: true ","date":"2023-03-03","objectID":"/01.go_interview2/:1:0","tags":["go"],"title":"goçŸ¥è¯†ç‚¹æ¢³ç†","uri":"/01.go_interview2/"},{"categories":["go"],"content":"toc: enable: true auto: true h7,h6,h5,h4,h3,h2,h1 { background : lightgray; } h7,h6,h5,h4,h3,h2,h1:hover { color : red; } map [[2023-02-20 Mon]] # æœ€ä¸»è¦çš„æ•°æ®ç»“æ„æœ‰ä¸¤ç§ï¼šå“ˆå¸ŒæŸ¥æ‰¾è¡¨ï¼ˆHash tableï¼‰ã€æœç´¢æ ‘ï¼ˆSearch treeï¼‰ avlæˆ–rbæ ‘ã€‚ Go è¯­è¨€é‡‡ç”¨çš„æ˜¯é“¾è¡¨è§£å†³å“ˆå¸Œå†²çªã€‚ 1.9.2 map å†…å­˜æ¨¡å‹ # ã€å¼•ç”³1ã€‘slice å’Œ map åˆ†åˆ«ä½œä¸ºå‡½æ•°å‚æ•°æ—¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ â€“ sliceè¿”å›çš„æ˜¯ç»“æ„ä½“ mapæ˜¯æŒ‡é’ˆ bmap å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€œæ¡¶â€ï¼Œæ¡¶é‡Œé¢ä¼šæœ€å¤šè£… 8 ä¸ª keyï¼Œè¿™äº› key ä¹‹æ‰€ä»¥ä¼šè½å…¥åŒä¸€ä¸ªæ¡¶ï¼Œç¬¬ä¹ä¸ªå°±ä¼šæ–°åŠ é€šè¿‡overflowè¿èµ·æ¥ æ¯ä¸ªbucketå†…éƒ¨key å’Œvalueæ˜¯åˆ†å¼€æ”¾çš„ï¼Œä¸æ˜¯ä¸€ç»„ä¸€ç»„æ”¾ mapåœ¨æ‰©å®¹çš„æ—¶å€™ï¼Œè¦æ¬è¿éƒ¨åˆ†bucketï¼Œå¯èƒ½å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œ ä»€ä¹ˆæ—¶å€™æ‰©å®¹ï¼Ÿ å£®å“‰å› å­è¶…è¿‡ é˜ˆå€¼6.5ï¼Œ overflowçš„bucketè¿‡å¤š keyä¸ºä»€ä¹ˆæ˜¯æ— åºçš„ï¼Ÿ æ‰©å®¹åä¼šæ¬ï¼Œkeyä½ç½®ä¼šå˜åŠ¨å¾ˆå¤§ï¼› è¿˜ä¸€ä¸ªæ¯æ¬¡for éå†æ—¶goä¹Ÿæ˜¯ä»ä¸€ä¸ªéšæœºåºå·å¼€å§‹çš„ mapä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€éå†è¿‡ç¨‹åˆ é™¤åŠ éƒ½å¯èƒ½æœ‰é—®é¢˜ sync.RWMutex æ— æ³•å¯¹mapçš„key valueå–åœ°å€ï¼Œå³æ—¶é€šè¿‡unsafe.pointeræ‹¿åˆ°ï¼Œä¹Ÿå¯èƒ½ä¼šå˜äº† interface# goçš„æ¥å£æœ‰ä»€ä¹ˆç‰¹ç‚¹: å¼•å…¥äº†ä¸è¦æ±‚ç±»å‹æ˜¾ç¤ºåœ°å£°æ˜å®ç°äº†æŸä¸ªæ¥å£ï¼Œåªè¦å®ç°äº†ç›¸å…³çš„æ–¹æ³•å³å¯ iface å’Œ eface éƒ½æ˜¯ Go ä¸­æè¿°æ¥å£çš„åº•å±‚ç»“æ„ä½“ï¼ŒåŒºåˆ«åœ¨äº iface æè¿°çš„æ¥å£åŒ…å«æ–¹æ³•ï¼Œè€Œ eface åˆ™æ˜¯ä¸åŒ…å«ä»»ä½•æ–¹æ³•çš„ç©ºæ¥å£ï¼šinterface{} iface å†…éƒ¨ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆï¼Œtab æŒ‡å‘ä¸€ä¸ª itab å®ä½“ dataæŒ‡å‘å…·ä½“çš„å€¼ tab æ˜¯æ¥å£è¡¨æŒ‡é’ˆï¼ŒæŒ‡å‘ç±»å‹ä¿¡æ¯ï¼›data æ˜¯æ•°æ®æŒ‡é’ˆï¼Œåˆ™æŒ‡å‘å…·ä½“çš„æ•°æ®ã€‚å®ƒä»¬åˆ†åˆ«è¢«ç§°ä¸ºåŠ¨æ€ç±»å‹å’ŒåŠ¨æ€å€¼ã€‚è€Œæ¥å£å€¼åŒ…æ‹¬åŠ¨æ€ç±»å‹å’ŒåŠ¨æ€å€¼ # eface å°±æ¯”è¾ƒç®€å•äº†ã€‚åªç»´æŠ¤äº†ä¸€ä¸ª _type å­—æ®µï¼Œè¡¨ç¤ºç©ºæ¥å£æ‰€æ‰¿è½½çš„å…·ä½“çš„å®ä½“ç±»å‹ã€‚data æè¿°äº†å…·ä½“çš„å€¼ ç¼–è¯‘æœŸè‡ªåŠ¨æ£€æµ‹æ˜¯å¦å®ç°äº†æ¥å£ # var _ io.Writer = (*myWriter)(nil) var _ io.Writer = myWriter{} // æ£€æŸ¥ myWriter ç±»å‹æ˜¯å¦å®ç°äº† io.Writer æ¥å£ ç±»å‹è½¬æ¢å’Œæ–­è¨€åŒºåˆ« ç±»å‹è½¬æ¢ã€ç±»å‹æ–­è¨€æœ¬è´¨éƒ½æ˜¯æŠŠä¸€ä¸ªç±»å‹è½¬æ¢æˆå¦å¤–ä¸€ä¸ªç±»å‹ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œç±»å‹æ–­è¨€æ˜¯å¯¹æ¥å£å˜é‡è¿›è¡Œçš„æ“ä½œ Goæ¥å£å’Œc++æ¥å£æœ‰å’Œå¼‚åŒ # C++ é€šè¿‡è™šå‡½æ•°è¡¨æ¥å®ç°åŸºç±»è°ƒç”¨æ´¾ç”Ÿç±»çš„å‡½æ•°ï¼›è€Œ Go é€šè¿‡ itab ä¸­çš„ fun å­—æ®µæ¥å®ç°æ¥å£å˜é‡è°ƒç”¨å®ä½“ç±»å‹çš„å‡½æ•° channel # ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè€Œè¦é€šè¿‡é€šä¿¡æ¥å®ç°å†…å­˜å…±äº«ã€‚ è¿™å°±æ˜¯ Go çš„å¹¶å‘å“²å­¦ï¼Œå®ƒä¾èµ– CSP æ¨¡å‹ï¼ŒåŸºäº channel å®ç° # æ•°æ®ç»“æ„ # buf æŒ‡å‘åº•å±‚å¾ªç¯æ•°ç»„(ç¼“å†²channel)ï¼Œ sendq recvq è¡¨ç¤ºè¢«é˜»å¡çš„goroutineï¼Œ sendx recvx å‘é€æ¥æ”¶msgç›¸å¯¹ä½ç½® å‘channelå‘é€æ•°æ®è¿‡ç¨‹æ€ä¹ˆæ ·çš„? a.æ£€æŸ¥æ¥æ”¶çš„channelæ˜¯å¦åˆæ³•ã€æ¯”å¦‚nilç›´æ¥è¿”å›fasleï¼Œgoroutine æŒ‚èµ· b.å¯¹äºä¸é˜»å¡çš„å‘é€æ“ä½œï¼Œå¦‚æœ channel æœªå…³é—­å¹¶ä¸”æ²¡æœ‰å¤šä½™çš„ç¼“å†²ç©ºé—´ å¦‚æœchannelå·²closeï¼Œpanic å¦‚æœèƒ½ä»ç­‰å¾…æ¥æ”¶é˜Ÿåˆ— recvq é‡Œå‡ºé˜Ÿä¸€ä¸ª sudogï¼ˆä»£è¡¨ä¸€ä¸ª goroutineï¼‰ï¼Œè¯´æ˜æ­¤æ—¶ channel æ˜¯ç©ºçš„ï¼Œæ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥æ‰ä¼šæœ‰ç­‰å¾…æ¥æ”¶è€…ã€‚è¿™æ—¶ä¼šè°ƒç”¨ send å‡½æ•°å°†å…ƒç´ ç›´æ¥ä»å‘é€è€…çš„æ ˆæ‹·è´åˆ°æ¥æ”¶è€…çš„æ ˆï¼Œå…³é”®æ“ä½œç”± sendDirect å‡½æ•°å®Œæˆ å¦‚æœæ²¡æœ‰å‘½ä¸­ä»¥ä¸Šæ¡ä»¶çš„ï¼Œè¯´æ˜ channel å·²ç»æ»¡äº†ï¼Œé˜»å¡èµ·æ¥ã€‚ è¿™é‡Œæœ‰ä¸€äº›ç»‘å®šæ“ä½œï¼Œsudog é€šè¿‡ g å­—æ®µç»‘å®š goroutineï¼Œè€Œ goroutine é€šè¿‡ waiting ç»‘å®š sudogï¼Œsudog è¿˜é€šè¿‡ elem å­—æ®µç»‘å®šå¾…å‘é€å…ƒç´ çš„åœ°å€ï¼Œä»¥åŠ c å­—æ®µç»‘å®šè¢«â€œå‘â€åœ¨æ­¤å¤„çš„ channelã€‚ æ‰€ä»¥ï¼Œå¾…å‘é€çš„å…ƒç´ åœ°å€å…¶å®æ˜¯å­˜å‚¨åœ¨ sudog ç»“æ„ä½“é‡Œï¼Œä¹Ÿå°±æ˜¯å½“å‰ goroutine é‡Œã€‚ ä»channelè¯»å–æ•°æ®æ€ä¹ˆæ ·çš„ï¼Ÿ å¦‚æœ channel æ˜¯ä¸€ä¸ªç©ºå€¼ï¼ˆnilï¼‰ï¼Œåœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œä¼šç›´æ¥è¿”å› å’Œå‘é€å‡½æ•°ä¸€æ ·ï¼Œæ¥ä¸‹æ¥æäº†ä¸€ä¸ªåœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œä¸ç”¨è·å–é”ï¼Œå¿«é€Ÿæ£€æµ‹åˆ°å¤±è´¥å¹¶ä¸”è¿”å›çš„æ“ä½œã€‚ (æ²¡å‡†å¤‡å¥½: éç¼“å†²çš„å‘é€é˜Ÿåˆ—é‡Œæ²¡goroutineï¼Œç¼“å†²æ€§bufferæ˜¯ç©ºçš„ â€” \u003e éƒ½è¯´æ˜æ²¡æ•°æ®å¯æ“ä½œ) æ¥ä¸‹æ¥çš„æ“ä½œï¼Œé¦–å…ˆä¼šä¸Šä¸€æŠŠé”ï¼Œç²’åº¦æ¯”è¾ƒå¤§ã€‚ æ¥ä¸‹æ¥ï¼Œå¦‚æœæœ‰ç­‰å¾…å‘é€çš„é˜Ÿåˆ—ï¼Œè¯´æ˜ channel å·²ç»æ»¡äº†ï¼Œè¦ä¹ˆæ˜¯éç¼“å†²å‹çš„ channelï¼Œè¦ä¹ˆæ˜¯ç¼“å†²å‹çš„ channelï¼Œä½† buf æ»¡äº†ã€‚è¿™ä¸¤ç§æƒ…å†µä¸‹éƒ½å¯ä»¥æ­£å¸¸æ¥æ”¶æ•°æ®ã€‚ æœ€åï¼Œå–å‡º sudog é‡Œçš„ goroutineï¼Œè°ƒç”¨ goready å°†å…¶çŠ¶æ€æ”¹æˆ â€œrunnableâ€ï¼Œå¾…å‘é€è€…è¢«å”¤é†’ï¼Œç­‰å¾…è°ƒåº¦å™¨çš„è°ƒåº¦ã€‚ å…³é—­goroutineè¿‡ç¨‹ close é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œå¯¹äºä¸€ä¸ª channelï¼Œrecvq å’Œ sendq ä¸­åˆ†åˆ«ä¿å­˜äº†é˜»å¡çš„å‘é€è€…å’Œæ¥æ”¶è€…ã€‚å…³é—­ channel åï¼Œå¯¹äºç­‰å¾…æ¥æ”¶è€…è€Œè¨€ï¼Œä¼šæ”¶åˆ°ä¸€ä¸ªç›¸åº”ç±»å‹çš„é›¶å€¼ã€‚å¯¹äºç­‰å¾…å‘é€è€…ï¼Œä¼šç›´æ¥ panicã€‚æ‰€ä»¥ï¼Œåœ¨ä¸äº†è§£ channel è¿˜æœ‰æ²¡æœ‰æ¥æ”¶è€…çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è´¸ç„¶å…³é—­ channelã€‚ å…³é—­çš„chanèƒ½è¯»å–bufferé‡Œçš„æ•°æ®ï¼Œå› ä¸ºè¯»å–æ—¶åˆ¤å®šè¿‡ç¨‹æ˜¯æœ‰bufferçš„æ— æ•°æ®å¹¶closeçš„æ‰ä¼šç«‹å³è¿”å› [[2023-02-28 Tue]] æ“ä½œchannelæ€»ç»“ æ€»ç»“ä¸€ä¸‹ï¼Œå‘ç”Ÿ panic çš„æƒ…å†µæœ‰ä¸‰ç§ï¼šå‘ä¸€ä¸ªå…³é—­çš„ channel è¿›è¡Œå†™æ“ä½œï¼›å…³é—­ä¸€ä¸ª nil çš„ channelï¼›é‡å¤å…³é—­ä¸€ä¸ª channelã€‚ è¯»ã€å†™ä¸€ä¸ª nil channel éƒ½ä¼šè¢«é˜»å¡ã€‚ å¦‚ä½•ä¼˜é›…å…³é—­channel æœ‰ä¸¤ä¸ªä¸é‚£ä¹ˆä¼˜é›…åœ°å…³é—­ channel çš„æ–¹æ³•ï¼š ä½¿ç”¨ defer-recover æœºåˆ¶ï¼Œæ”¾å¿ƒå¤§èƒ†åœ°å…³é—­ channel æˆ–è€…å‘ channel å‘é€æ•°æ®ã€‚å³ä½¿å‘ç”Ÿäº† panicï¼Œæœ‰ defer-recover åœ¨å…œåº•ã€‚ ä½¿ç”¨ sync.Once æ¥ä¿è¯åªå…³é—­ä¸€æ¬¡ã€‚ å¼•å…¥ä¸€ä¸ªä¸­é—´è€…: channel é€šçŸ¥goroutineå…³é—­ï¼Œæœ€ç»ˆæœ‰ä¸€ä¸ªä¸»close channelæ³„éœ² æ³„æ¼çš„åŸå› æ˜¯ goroutine æ“ä½œ channel åï¼Œå¤„äºå‘é€æˆ–æ¥æ”¶é˜»å¡çŠ¶æ€ï¼Œè€Œ channel å¤„äºæ»¡æˆ–ç©ºçš„çŠ¶æ€ï¼Œä¸€ç›´å¾—ä¸åˆ°æ”¹å˜ã€‚åŒæ—¶ï¼Œåƒåœ¾å›æ”¶å™¨ä¹Ÿä¸ä¼šå›æ”¶æ­¤ç±»èµ„æºï¼Œè¿›è€Œå¯¼è‡´ gouroutine ä¼šä¸€ç›´å¤„äºç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œä¸è§å¤©æ—¥ã€‚ å¦å¤–ï¼Œç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹äºä¸€ä¸ª channelï¼Œå¦‚æœæ²¡æœ‰ä»»ä½• goroutine å¼•ç”¨äº†ï¼Œgc ä¼šå¯¹å…¶è¿›è¡Œå›æ”¶æ“ä½œï¼Œä¸ä¼šå¼•èµ·å†…å­˜æ³„æ¼ channelå¼•ç”¨æœ‰å“ªäº›ï¼Ÿ # åœæ­¢ä¿¡å· ä»»åŠ¡å®šæ—¶ # è§£è€¦ç”Ÿäº§æ–¹å’Œæ¶ˆè´¹æ–¹ # æ§åˆ¶å¹¶å‘æ•° # context # GC 1.åŸºç¡€ 2. æ ¹å¯¹è±¡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ# æ ¹å¯¹è±¡ åœ¨åƒåœ¾å›æ”¶çš„æœ¯è¯­ä¸­åˆå«åšæ ¹é›†åˆï¼Œå®ƒæ˜¯åƒåœ¾å›æ”¶å™¨åœ¨æ ‡è®°è¿‡ç¨‹æ—¶æœ€å…ˆæ£€æŸ¥çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ï¼š å…¨å±€å˜é‡ï¼šç¨‹åºåœ¨ç¼–è¯‘æœŸå°±èƒ½ç¡®å®šçš„é‚£äº›å­˜åœ¨äºç¨‹åºæ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„å˜é‡ã€‚ æ‰§è¡Œæ ˆï¼šæ¯ä¸ª goroutine éƒ½åŒ…å«è‡ªå·±çš„æ‰§è¡Œæ ˆï¼Œè¿™äº›æ‰§è¡Œæ ˆä¸ŠåŒ…å«æŒ‡å‘åˆ†é…çš„å †å†…å­˜åŒºå—çš„æŒ‡é’ˆã€‚ å¯„å­˜å™¨ï¼šå¯„å­˜å™¨çš„å€¼å¯èƒ½è¡¨ç¤ºä¸€ä¸ªæŒ‡é’ˆï¼Œå‚ä¸è®¡ç®—çš„è¿™äº›æŒ‡é’ˆå¯èƒ½æŒ‡å‘æŸäº›èµ‹å€¼å™¨åˆ†é…çš„å †å†…å­˜åŒºå—ã€‚ 3. å¸¸è§çš„ GC å®ç°æ–¹å¼æœ‰å“ªäº›ï¼ŸGo è¯­è¨€çš„ GC ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆï¼Ÿ# ç®—æ³• å…¶å­˜åœ¨å½¢å¼å¯ä»¥å½’ç»“ä¸ºè¿½è¸ªï¼ˆTracingï¼‰å’Œå¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰è¿™ä¸¤ç§å½¢å¼çš„æ··åˆè¿ç”¨, [[è¿½è¸ªå¼GC]] ç‰¹ç‚¹ Go çš„ GC ç›®å‰ä½¿ç”¨çš„æ˜¯æ— åˆ†ä»£ï¼ˆå¯¹è±¡æ²¡æœ‰ä»£é™…ä¹‹åˆ†ï¼‰ã€ä¸æ•´ç†ï¼ˆå›æ”¶è¿‡ç¨‹ä¸­ä¸å¯¹å¯¹è±¡è¿›è¡Œç§»åŠ¨ä¸æ•´ç†ï¼‰ã€å¹¶å‘ï¼ˆä¸ç”¨æˆ·ä»£ç å¹¶å‘æ‰§è¡Œï¼‰çš„ä¸‰è‰²æ ‡è®°æ¸…æ‰«ç®—æ³•ã€ ä»æ ¹å¯¹è±¡å‡ºå‘ï¼Œæ ¹æ®å¯¹è±¡ä¹‹é—´çš„å¼•ç”¨ä¿¡æ¯ï¼Œä¸€æ­¥æ­¥æ¨è¿›ç›´åˆ°æ‰«æå®Œæ¯•æ•´ä¸ªå †å¹¶ç¡®å®šéœ€è¦ä¿ç•™çš„å¯¹è±¡ï¼Œä»è€Œå›æ”¶æ‰€æœ‰å¯å›æ”¶çš„å¯¹è±¡ã€‚Goã€ Javaã€V8 å¯¹ JavaScript çš„å®ç°ç­‰å‡ä¸ºè¿½è¸ªå¼ GC å¼•ç”¨è®¡æ•°å¼GC æ¯ä¸ªå¯¹è±¡è‡ªèº«åŒ…å«ä¸€ä¸ªè¢«å¼•ç”¨çš„è®¡æ•°å™¨ï¼Œå½“è®¡æ•°å™¨å½’é›¶æ—¶è‡ªåŠ¨å¾—åˆ°å›æ”¶ã€‚å› ä¸ºæ­¤æ–¹æ³•ç¼ºé™·è¾ƒå¤šï¼Œåœ¨è¿½æ±‚é«˜æ€§èƒ½æ—¶é€šå¸¸ä¸è¢«åº”ç”¨ã€‚Pythonã€Objective-C ç­‰å‡ä¸ºå¼•ç”¨è®¡æ•°å¼ GCï¼Œ å¿«ç®€å•ã€ä½†æ¯æ¬¡è¦è®¡ç®—å¼•ç”¨æ•°æ€§èƒ½å·®ï¼Œéœ€è¦é¢å¤–å†…å­˜è®°å½•å¼•ç”¨æ•° 4. ä¸‰è‰²æ ‡è®°æ³•æ˜¯ä»€ä¹ˆï¼Ÿ# å…³é”® ç†è§£å¯¹è±¡çš„ä¸‰è‰²æŠ½è±¡ä»¥åŠæ³¢é¢(wavefront)æ¨è¿›è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚ä¸‰è‰²æŠ½è±¡åªæ˜¯ä¸€ç§æè¿°è¿½è¸ªå¼å›æ”¶å™¨çš„æ–¹æ³•, ç™½è‰²:: è¦è¢«å›æ”¶çš„å¯¹è±¡ï¼Œä¸å¯è¾¾çš„ ç°è‰²:: ä¸­é—´å¸¦çš„ï¼Œå¯èƒ½è¢«å›æ”¶ï¼Œä¹Ÿå¯èƒ½å¯è¾¾å¯¹è±¡ é»‘è‰²:: å°±æ˜¯å¯è¾¾çš„ï¼Œä¸å¯å›æ”¶çš„ 5. STW æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ # å®šä¹‰:: stop the worldï¼Œå¼€å§‹gcçš„æ—¶å€™ä¼šåœæ­¢æ‰€æœ‰ç”¨æˆ·ä»£ç ï¼Œå¯¼è‡´åœæ­¢ 6. å¦‚ä½•è§‚å¯Ÿ Go GCï¼Ÿ# æ–¹å¼1ï¼š GODEBUG=gctrace=1 # æ–¹å¼2..4: go toolã€ runtime.memstateã€ gcstateä¿¡æ¯ wall clock æ˜¯æŒ‡å¼€å§‹æ‰§è¡Œåˆ°å®Œæˆæ‰€ç»å†çš„å®é™…æ—¶é—´ï¼ŒåŒ…æ‹¬å…¶ä»–ç¨‹åºå’Œæœ¬ç¨‹åºæ‰€æ¶ˆè€—çš„æ—¶é—´ï¼› cpu time æ˜¯æŒ‡ç‰¹å®šç¨‹åºä½¿ç”¨ CPU çš„æ—¶é—´ wall clock \u003c cpu time: {{cloze å……åˆ†åˆ©ç”¨å¤šæ ¸}} wall clock â‰ˆ cpu time: æœªå¹¶è¡Œæ‰§è¡Œ wall clock \u003e cpu time: å¤š","date":"2023-03-03","objectID":"/01.go_interview2/:2:0","tags":["go"],"title":"goçŸ¥è¯†ç‚¹æ¢³ç†","uri":"/01.go_interview2/"},{"categories":["brpc"],"content":"rpc(brpc) - **brpc`åŸºç¡€`** .","date":"2022-12-17","objectID":"/01.basic/","tags":["brpc"],"title":"01.brpcåŸºç¡€","uri":"/01.basic/"},{"categories":["brpc"],"content":"1.ç®€ä»‹ ","date":"2022-12-17","objectID":"/01.basic/:0:1","tags":["brpc"],"title":"01.brpcåŸºç¡€","uri":"/01.basic/"},{"categories":["brpc"],"content":"2.èµ„æ–™ ","date":"2022-12-17","objectID":"/01.basic/:0:2","tags":["brpc"],"title":"01.brpcåŸºç¡€","uri":"/01.basic/"},{"categories":["brpc"],"content":"3.è¿‡ç¨‹ ","date":"2022-12-17","objectID":"/01.basic/:0:3","tags":["brpc"],"title":"01.brpcåŸºç¡€","uri":"/01.basic/"},{"categories":["linux"],"content":"linux - **libc.so.6: version `GLIBC_2.14' not found** .","date":"2022-03-08","objectID":"/01.glibc/","tags":["linux","glic"],"title":"linux - glicå‡çº§","uri":"/01.glibc/"},{"categories":["linux"],"content":"ğŸ’¥è°¨æ…æ“ä½œ. libc.so.6: version `GLIBC_2.14â€™ not found. pre { white-space: pre-wrap; word-wrap: break-word; align: left; } h3,h1 { background : lightgray; } h3:hover { color : red; } /lib64/libc.so.6: version `GLIBC_2.14' not found strings /lib64/ligc.so.6 | grep GLIBC å¯çœ‹æ”¯æŒå“ªäº›ç‰ˆæœ¬ GLIBC_2.10 GLIBC_2.11 GLIBC_2.12 å®‰è£…gcc-å‚è€ƒï¼š gccä¸»è¦ä¾èµ–æœ‰ï¼šgmpï¼ŒMPFRï¼ŒMPCï¼Œæ‰‹åŠ¨å®‰è£…å‡å¯ã€‚ æ ¹æ®download_prerequisitesæ¯”è¾ƒeasey å®‰è£… æ–°ç‰ˆglibcï¼šæ¯”è¾ƒç®€å•ï¼Œç½‘ä¸Šèµ„æ–™å¾ˆå¤šå‚è€ƒ ä¹‹åæŠŠglibc.so.6æŒ‡å‘æ–°çš„ï¼Œæˆ–è€…æ”¹LD_LIBRARY_PATHï¼š æ¯”å¦‚export LD_LIBRARY_PATH=/usr/local/glibc-2.17/lib:/lib64/:/usr/local/gcc-4.8/lib64 å¯èƒ½æŠ¥é”™ï¼šæ¯”å¦‚æŸäº›soç‰ˆæœ¬é—®é¢˜ï¼Œldé—®é¢˜ï¼Œç”šè‡³å„ç§å‘½ä»¤å¤±æ•ˆ æ¢å¤ï¼š æ­¤æ—¶æ¢å¤2.12ä¸ºä¾‹ï¼šLD_PRELOAD=\"/lib64/libc.so.6-2.12\" ln -s /lib64/libc-2.12.so /lib64/libc.so.6 æ¢å¤åˆ°æ–°çš„ error while loading shared libraries: __vdso_time: invalid mode for dlopen(): Invalid argument è¿™ä¸ªæ˜¯ç”¨çš„ldå’Œglicé—®é¢˜ï¼Œæ¯”å¦‚2.17å‡çº§ä¸ºä¾‹ echo \"\" \u003e /etc/ld.so.preload LD_LIBRARY_PATH=/usr/local/glibc-2.17/lib:/lib64/:/usr/local/gcc-4.8/lib64:/usr/lib64 /usr/local/glibc-2.17/lib/ld-2.17.so ./a.out å¯ä»¥æ‰§è¡Œï¼Œä½†æ˜¯ä¸èƒ½æ¯ä¸ªéƒ½æŒ‡å®šld-2717.so ","date":"2022-03-08","objectID":"/01.glibc/:0:0","tags":["linux","glic"],"title":"linux - glicå‡çº§","uri":"/01.glibc/"},{"categories":["linux"],"content":"æœ€ç»ˆç‰ˆ â€“ è°¨æ…æ“ä½œ,é£é™©æå¤§ æºğŸ”—ï¼šç›´æ¥å‡çº§rpmåŒ… #!/bin/bash cat \u0026lt;\u0026lt;EOF caveatï¼š be careful, this may destroy your linux systemï¼Œ please backup your data first. EOF echo \u0026quot;May damage your system!\u0026quot; read -p \u0026quot;sure to do ?\u0026quot; t sleep 5 # update glibc to 2.17 for CentOS 6 GLIBC=glibc OS=el6 SERVER=https://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6 VERSION=2.17-55 FULL_VERSION=$GLIBC-$VERSION.fc20 X64=x86_64 I386=i386 I636=i686 REPO_32=epel-6-$I386 REPO_64=epel-6-$X64 SERVER_32=$SERVER/$REPO_32/$FULL_VERSION RPM_32=$VERSION.$OS.$I636.rpm SERVER_64=$SERVER/$REPO_64/$FULL_VERSION RPM_64=$VERSION.$OS.$X64.rpm # Packages P_1=$GLIBC P_2=$GLIBC-common P_3=$GLIBC-devel P_4=$GLIBC-headers P_5=$GLIBC-static P_6=$GLIBC-utils P_7=nscd # Required as dependency of glibc-utils sudo yum install --assumeyes gd # 64-bit --nodeps æ…é‡ä½¿ç”¨ sudo rpm -Uvh --nodeps --force $SERVER_64/$P_1-$RPM_64 $SERVER_64/$P_2-$RPM_64 $SERVER_64/$P_3-$RPM_64 $SERVER_64/$P_4-$RPM_64 $SERVER_64/$P_5-$RPM_64 $SERVER_64/$P_6-$RPM_64 $SERVER_64/$P_7-$RPM_64 # Print out versions strings /lib64/libc.so.6 | grep GLIBC # 32-bit # sudo rpm -Uvh --force $SERVER_32/$P_1-$RPM_32 $SERVER_32/$P_2-$RPM_32 $SERVER_32/$P_3-$RPM_32 $SERVER_32/$P_4-$RPM_32 $SERVER_32/$P_5-$RPM_32 $SERVER_32/$P_6-$RPM_32 $SERVER_32/$P_7-$RPM_32 ä»¥ä¸Šæ“ä½œä¸å¯é€†,ä¸”éœ€é‡å¯;å¦‚é‡å¯å¤±è´¥åªèƒ½é‡è£…ç³»ç»Ÿ. ç»æµ‹è¯•å¯è¡Œ ","date":"2022-03-08","objectID":"/01.glibc/:0:1","tags":["linux","glic"],"title":"linux - glicå‡çº§","uri":"/01.glibc/"},{"categories":["go"],"content":"go - **gmp** .","date":"2021-06-08","objectID":"/gmp1/","tags":["go","gmp"],"title":"go - GMPè°ƒåº¦å™¨","uri":"/gmp1/"},{"categories":["go"],"content":"åŸæ–‡:GMPåˆ†æ-æ‰‹æ’¸goroutine pool go - GMPè°ƒåº¦å™¨. å­¦ä¹ :GMPåˆ†æ-æ‰‹æ’¸goroutine pool ä¸»æµçš„çº¿ç¨‹æ¨¡å‹å‹åˆ†ä¸‰ç§: å†…æ ¸çº§çº¿ç¨‹æ¨¡å‹ ã€ ç”¨æˆ·çº§çº¿ç¨‹ æ¨¡å‹å’Œ ä¸¤çº§çº¿ç¨‹ æ¨¡å‹ï¼ˆä¹Ÿç§°æ··åˆå‹çº¿ç¨‹æ¨¡å‹ï¼‰ï¼Œä¼ ç»Ÿçš„åç¨‹åº“å±äºç”¨æˆ·çº§çº¿ç¨‹æ¨¡å‹ ç”¨æˆ·çº§/çº¿ç¨‹æ¨¡å‹ ç”¨æˆ·å±‚é¢å¤šçº¿ç¨‹ï¼Œå’Œå†…æ ¸çº¿ç¨‹N-1å…³ç³»ï¼Œå†…æ ¸åªçŸ¥é“ç”¨æˆ·è¿›ç¨‹ï¼Œç”¨æˆ·å±‚çš„çº¿ç¨‹è‡ªå·±è°ƒåº¦æ§åˆ¶ã€‚ åŸç½ªï¼šå¹¶ä¸èƒ½åšåˆ°çœŸæ­£æ„ä¹‰ä¸Šçš„å¹¶å‘ï¼Œå‡è®¾åœ¨æŸä¸ªç”¨æˆ·è¿›ç¨‹ä¸Šçš„æŸä¸ªç”¨æˆ·çº¿ç¨‹å› ä¸ºä¸€ä¸ªé˜»å¡è°ƒç”¨ï¼ˆæ¯”å¦‚ I/O é˜»å¡ï¼‰è€Œè¢« CPU ç»™ä¸­æ–­ï¼ˆæŠ¢å å¼è°ƒåº¦ï¼‰äº†ï¼Œé‚£ä¹ˆè¯¥è¿›ç¨‹å†…çš„æ‰€æœ‰çº¿ç¨‹éƒ½è¢«é˜»å¡ï¼ˆå› ä¸ºå•ä¸ªç”¨æˆ·è¿›ç¨‹å†…çš„çº¿ç¨‹è‡ªè°ƒåº¦æ˜¯æ²¡æœ‰ CPU æ—¶é’Ÿä¸­æ–­çš„ï¼Œä»è€Œæ²¡æœ‰è½®è½¬è°ƒåº¦ï¼‰ï¼Œæ•´ä¸ªè¿›ç¨‹è¢«æŒ‚èµ· è§£å†³ï¼šåç¨‹åº“ä¼šæŠŠè‡ªå·±ä¸€äº›é˜»å¡çš„æ“ä½œé‡æ–°å°è£…ä¸ºå®Œå…¨çš„éé˜»å¡å½¢å¼ï¼Œç„¶ååœ¨ä»¥å‰è¦é˜»å¡çš„ç‚¹ä¸Šï¼Œä¸»åŠ¨è®©å‡ºè‡ªå·±ï¼Œå¹¶é€šè¿‡æŸç§æ–¹å¼é€šçŸ¥æˆ–å”¤é†’å…¶ä»–å¾…æ‰§è¡Œçš„ç”¨æˆ·çº¿ç¨‹åœ¨è¯¥ KSE ä¸Šè¿è¡Œï¼Œä»è€Œé¿å…äº†å†…æ ¸è°ƒåº¦å™¨ç”±äº KSE é˜»å¡è€Œåšä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™æ ·æ•´ä¸ªè¿›ç¨‹ä¹Ÿä¸ä¼šè¢«é˜»å¡äº† å†…æ ¸çº§çº¿ç¨‹æ¨¡å‹ çº¿ç¨‹çš„è°ƒåº¦åˆ™å®Œå…¨äº¤ä»˜ç»™æ“ä½œç³»ç»Ÿå†…æ ¸å»åšï¼Œåº”ç”¨ç¨‹åºå¯¹çº¿ç¨‹çš„åˆ›å»ºã€ç»ˆæ­¢ä»¥åŠåŒæ­¥éƒ½åŸºäºå†…æ ¸æä¾›çš„ç³»ç»Ÿè°ƒç”¨æ¥å®Œæˆ æ··åˆçº¿ç¨‹æ¨¡å‹/ä¸¤çº§çº¿ç¨‹æ¨¡å‹ ç”¨æˆ·çº¿ç¨‹ä¸å†…æ ¸ KSE æ˜¯å¤šå¯¹å¤šï¼ˆN : Mï¼‰çš„æ˜ å°„æ¨¡å‹ å³ç”¨æˆ·è°ƒåº¦å™¨å®ç°ç”¨æˆ·çº¿ç¨‹åˆ° KSE çš„ã€è°ƒåº¦ã€ï¼Œå†…æ ¸è°ƒåº¦å™¨å®ç° KSE åˆ° CPU ä¸Šçš„ã€è°ƒåº¦ã€ goè¯­è¨€çš„G-P-M æ¨¡å‹ goroutine æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ‰§è¡Œå•å…ƒï¼ŒOS çº¿ç¨‹2M ï¼Œgoroutine åŠ¨æ€ï¼Œ åˆå§‹ 2KBï¼Œæœ€å¤§å¯è¾¾ 1GBï¼Œä¸”è‡ªå·± Go Schedulerè°ƒåº¦ï¼Œè¿˜å¯è‡ªåŠ¨å›æ”¶ G : è¡¨Goroutineï¼ŒGoroutine å¯¹åº”ä¸€ä¸ª G ç»“æ„ï¼ŒG å­˜å‚¨ Goroutine çš„è¿è¡Œå †æ ˆã€çŠ¶æ€ä»¥åŠä»»åŠ¡å‡½æ•°ï¼Œå¯é‡ç”¨ã€‚G å¹¶éæ‰§è¡Œä½“ï¼Œæ¯ä¸ª G éœ€è¦ç»‘å®šåˆ° P æ‰èƒ½è¢«è°ƒåº¦æ‰§è¡Œã€‚ P : Processorï¼Œè¡¨ç¤ºé€»è¾‘å¤„ç†å™¨ï¼Œ å¯¹ G æ¥è¯´ï¼ŒP ç›¸å½“äº CPU æ ¸ï¼ŒG åªæœ‰ç»‘å®šåˆ° P(åœ¨ P çš„ local runq ä¸­)æ‰èƒ½è¢«è°ƒåº¦ã€‚å¯¹ M æ¥è¯´ï¼ŒP æä¾›äº†ç›¸å…³çš„æ‰§è¡Œç¯å¢ƒ(Context)ï¼Œå¦‚å†…å­˜åˆ†é…çŠ¶æ€(mcache)ï¼Œä»»åŠ¡é˜Ÿåˆ—(G)ç­‰ï¼ŒP çš„æ•°é‡å†³å®šäº†ç³»ç»Ÿå†…æœ€å¤§å¯å¹¶è¡Œçš„ G çš„æ•°é‡ï¼ˆå‰æï¼šç‰©ç† CPU æ ¸æ•° \u003e= P çš„æ•°é‡ï¼‰ï¼ŒP çš„æ•°é‡ç”±ç”¨æˆ·è®¾ç½®çš„ GOMAXPROCS å†³å®šï¼Œä½†æ˜¯ä¸è®º GOMAXPROCS è®¾ç½®ä¸ºå¤šå¤§ï¼ŒP çš„æ•°é‡æœ€å¤§ä¸º 256ã€‚ M : Machineï¼ŒOS çº¿ç¨‹æŠ½è±¡ï¼Œä»£è¡¨ç€çœŸæ­£æ‰§è¡Œè®¡ç®—çš„èµ„æºï¼Œåœ¨ç»‘å®šæœ‰æ•ˆçš„ P åï¼Œè¿›å…¥ schedule å¾ªç¯ï¼›è€Œ schedule å¾ªç¯çš„æœºåˆ¶å¤§è‡´æ˜¯ä» Global é˜Ÿåˆ—ã€P çš„ Local é˜Ÿåˆ—ä»¥åŠ wait é˜Ÿåˆ—ä¸­è·å– Gï¼Œåˆ‡æ¢åˆ° G çš„æ‰§è¡Œæ ˆä¸Šå¹¶æ‰§è¡Œ G çš„å‡½æ•°ï¼Œè°ƒç”¨ goexit åšæ¸…ç†å·¥ä½œå¹¶å›åˆ° Mï¼Œå¦‚æ­¤åå¤ã€‚M å¹¶ä¸ä¿ç•™ G çŠ¶æ€ï¼Œè¿™æ˜¯ G å¯ä»¥è·¨ M è°ƒåº¦çš„åŸºç¡€ï¼ŒM çš„æ•°é‡æ˜¯ä¸å®šçš„ï¼Œç”± Go Runtime è°ƒæ•´ï¼Œä¸ºäº†é˜²æ­¢åˆ›å»ºè¿‡å¤š OS çº¿ç¨‹å¯¼è‡´ç³»ç»Ÿè°ƒåº¦ä¸è¿‡æ¥ï¼Œç›®å‰é»˜è®¤æœ€å¤§é™åˆ¶ä¸º 10000 ä¸ª ","date":"2021-06-08","objectID":"/gmp1/:0:0","tags":["go","gmp"],"title":"go - GMPè°ƒåº¦å™¨","uri":"/gmp1/"},{"categories":["db"],"content":"db - **sqlite** .","date":"2020-05-06","objectID":"/path/","tags":["db","sqlite"],"title":"db - sqliteèµ„æ–™","uri":"/path/"},{"categories":["db"],"content":"DB- sqlite . h3,h1 { background : lightgray; } h3:hover { color : red; } ","date":"2020-05-06","objectID":"/path/:0:0","tags":["db","sqlite"],"title":"db - sqliteèµ„æ–™","uri":"/path/"},{"categories":["db"],"content":"1.path a.inside sqlite \u003c\u003cSQLite Database System --è¯¦ç»†\u003e\u003e b.å®˜æ–¹æ–‡æ¡£ï¼Œarchitecture of sqliteï¼›æ¥ç€å†çœ‹ä¸€ä¸‹\"Atomic Commit In SQLite\", ","date":"2020-05-06","objectID":"/path/:0:1","tags":["db","sqlite"],"title":"db - sqliteèµ„æ–™","uri":"/path/"},{"categories":["db"],"content":"2.å‚è€ƒèµ„æ–™ çŸ¥ä¹å‚è€ƒ ","date":"2020-05-06","objectID":"/path/:0:2","tags":["db","sqlite"],"title":"db - sqliteèµ„æ–™","uri":"/path/"},{"categories":["db"],"content":"3.ç®€å•æ€ä¹ˆå†™ä¸ªdb how to build a database ","date":"2020-05-06","objectID":"/path/:0:3","tags":["db","sqlite"],"title":"db - sqliteèµ„æ–™","uri":"/path/"},{"categories":["db"],"content":"4.sqliteä»£ç  fossiä½¿ç”¨ fossil Amalgamationæ˜¯åˆå¹¶åˆ°ä¸€ä¸ªcppæ–‡ä»¶äº† ","date":"2020-05-06","objectID":"/path/:0:4","tags":["db","sqlite"],"title":"db - sqliteèµ„æ–™","uri":"/path/"},{"categories":["db"],"content":"5.Architecture Architecture of SQLite ","date":"2020-05-06","objectID":"/path/:0:5","tags":["db","sqlite"],"title":"db - sqliteèµ„æ–™","uri":"/path/"},{"categories":["docker"],"content":"docker - **dockeråŸºç¡€**","date":"2021-08-08","objectID":"/03.docker-volume-new/","tags":["docker"],"title":"docker - å·å’Œç½‘ç»œ","uri":"/03.docker-volume-new/"},{"categories":["docker"],"content":"åŸºç¡€ docker. pre { white-space: pre-wrap; word-wrap: break-word; align: left; } h3,h1 { background : lightgray; } h3:hover { color : red; } ","date":"2021-08-08","objectID":"/03.docker-volume-new/:0:0","tags":["docker"],"title":"docker - å·å’Œç½‘ç»œ","uri":"/03.docker-volume-new/"},{"categories":["docker"],"content":"1.volumeæ˜¯ä»€ä¹ˆ ","date":"2021-08-08","objectID":"/03.docker-volume-new/:0:1","tags":["docker"],"title":"docker - å·å’Œç½‘ç»œ","uri":"/03.docker-volume-new/"},{"categories":["docker"],"content":"2.volume ç”¨é€” a.multi dockerå…±äº«ä»£ç  b.changed frequencyï¼Œ so do not want build c.test and delop at the same time ","date":"2021-08-08","objectID":"/03.docker-volume-new/:0:2","tags":["docker"],"title":"docker - å·å’Œç½‘ç»œ","uri":"/03.docker-volume-new/"},{"categories":["docker"],"content":"3.how to config docker run -v $PWD/xxx:/var/xxã€ï¼šro/rwå¯é€‰ã€‘ ","date":"2021-08-08","objectID":"/03.docker-volume-new/:0:3","tags":["docker"],"title":"docker - å·å’Œç½‘ç»œ","uri":"/03.docker-volume-new/"},{"categories":["docker"],"content":"1.dockerä¹‹é—´ç½‘ç»œ a.docker å†…éƒ¨ç½‘ç»œ ä¸çµæ´» b.1.9å docker networking [v] ä¸åŒå®¿ä¸»æœº åœæ­¢ é‡å¯ æ— åºå…³ç³»é“¾æ¥ è¿è¡Œé¡ºåºæ— å…³ c.dockeré“¾æ¥ï¼Œ é€šä¿¡æŠ½è±¡å±‚ ","date":"2021-08-08","objectID":"/03.docker-volume-new/:0:4","tags":["docker"],"title":"docker - å·å’Œç½‘ç»œ","uri":"/03.docker-volume-new/"},{"categories":["docker"],"content":"2.åˆ›å»ºdocker networking a.docker network create xx docker run --net=xx --name=bbbã€‚ã€‚ã€‚ æŒ‡å®šç½‘ç»œï¼› ä¼šåœ¨/etc/hostsé‡Œæœ‰é…ç½®ï¼Œä¼šæœ‰bbb.xxä½œä¸ºåŸŸå b.docker network inspect xx c.overlayç½‘ç»œæ”¯æŒè·¨å®¿ä¸»æœº d.docker network connect xx contianernamexx e.docker network disconnect xx continerx ","date":"2021-08-08","objectID":"/03.docker-volume-new/:0:5","tags":["docker"],"title":"docker - å·å’Œç½‘ç»œ","uri":"/03.docker-volume-new/"},{"categories":["docker"],"content":"3.dockerç‰¹æƒæ¨¡å¼ â€“privileged dockerå†…åœ¨è·‘dockerå¿…é¡»","date":"2021-08-08","objectID":"/03.docker-volume-new/:0:6","tags":["docker"],"title":"docker - å·å’Œç½‘ç»œ","uri":"/03.docker-volume-new/"},{"categories":["docker"],"content":"docker - **dockeråŸºç¡€**","date":"2021-08-08","objectID":"/02.docker-commit/","tags":["docker"],"title":"docker - æ„å»º","uri":"/02.docker-commit/"},{"categories":["docker"],"content":"åŸºç¡€ docker. pre { white-space: pre-wrap; word-wrap: break-word; align: left; } h3,h1 { background : lightgray; } h3:hover { color : red; } ","date":"2021-08-08","objectID":"/02.docker-commit/:0:0","tags":["docker"],"title":"docker - æ„å»º","uri":"/02.docker-commit/"},{"categories":["docker"],"content":"1.æ„å»º docker commit docker build + dockerfile ","date":"2021-08-08","objectID":"/02.docker-commit/:0:1","tags":["docker"],"title":"docker - æ„å»º","uri":"/02.docker-commit/"},{"categories":["docker"],"content":"2.docker imageè®¾ç½® daocloudæ¯”è¾ƒå¿« ustcä¸­ç§‘å¤§çš„ ","date":"2021-08-08","objectID":"/02.docker-commit/:0:2","tags":["docker"],"title":"docker - æ„å»º","uri":"/02.docker-commit/"},{"categories":["docker"],"content":"3.docker commit docker commit -m 'comomment' -a 'author' [id] user/reigtname ","date":"2021-08-08","objectID":"/02.docker-commit/:0:3","tags":["docker"],"title":"docker - æ„å»º","uri":"/02.docker-commit/"},{"categories":["docker"],"content":"4.dockerfile docker build -t=\"ä»“åº“/é•œåƒå:tag\" . docker build -t=\"ä»“åº“/é•œåƒå:tag\" -f æŒ‡å®šdockerfile docker build --no-cache -t=\"ä»“åº“/é•œåƒå:tag\" git@github.com:xx/xxçš„dockerfile # Version: 0.1 FROM ubuntu:14.04 å±‚ MAINTAINER lf \"xx.com\" å±‚... RUN apt-get update \u0026\u0026 apt-get install -y nginx RUN echo \"hi dockerfile\" \u003e /usr/share/nginx/html/index.html CMD [\"/bin/bash\", \"ls\", \" -l /\"] [è¿è¡Œæ—¶æ‰§è¡Œrunæ˜¯buildã€‚cmdåªèƒ½ä¸€æ¡] ENTRYPOINT [\"/usr/bin/nginx\"ï¼Œ\"-g\" \" daemon off;\"] [ä¸ä¼šè¢«runçš„è¦†ç›–ï¼Œå’Œcmdä¸ä¸€æ ·] ENV XX_PAHT /home/xx VOLUME --TODO: USER ADD / COPY LABEL ARG --build-arg x=b éƒ¨åˆ†é¢„å®šä¹‰argså˜é‡ ONBUILD EXPOSE 8082 ","date":"2021-08-08","objectID":"/02.docker-commit/:0:4","tags":["docker"],"title":"docker - æ„å»º","uri":"/02.docker-commit/"},{"categories":["docker"],"content":"5.other cmd docker history id çœ‹buildå‘½ä»¤ ","date":"2021-08-08","objectID":"/02.docker-commit/:0:5","tags":["docker"],"title":"docker - æ„å»º","uri":"/02.docker-commit/"},{"categories":["docker"],"content":"6.portå’Œå®¿ä¸»æœºç»‘å®š a.éšæœºé€‰32678 -- 61000 b.æŒ‡å®šï¼š -p c.docker ps -l æˆ– docker port id port d.docker run -P ä¼šæŠŠdockerfileé‡Œexposeçš„ç«¯å£å¯¹å¤–å…¬å¼€ ","date":"2021-08-08","objectID":"/02.docker-commit/:0:6","tags":["docker"],"title":"docker - æ„å»º","uri":"/02.docker-commit/"},{"categories":["docker"],"content":"7.push docker hub ","date":"2021-08-08","objectID":"/02.docker-commit/:0:7","tags":["docker"],"title":"docker - æ„å»º","uri":"/02.docker-commit/"},{"categories":["docker"],"content":"8.local registry åŠ tagï¼š docker tag id registryhost:port /name/ä»“åº“ ","date":"2021-08-08","objectID":"/02.docker-commit/:0:8","tags":["docker"],"title":"docker - æ„å»º","uri":"/02.docker-commit/"},{"categories":["docker"],"content":"docker - **dockeråŸºç¡€**","date":"2021-08-08","objectID":"/01.docker-one/","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"åŸºç¡€ docker. pre { white-space: pre-wrap; word-wrap: break-word; align: left; } h3,h1 { background : lightgray; } h3:hover { color : red; } ","date":"2021-08-08","objectID":"/01.docker-one/:0:0","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"1.dockerå®ˆæŠ¤è¿›ç¨‹ æ—©æœŸç‰ˆæœ¬ docker daemon -H tcp://ip:port -H ... åæœŸdockerd ","date":"2021-08-08","objectID":"/01.docker-one/:0:1","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"2.ç¬¬ä¸€ä¸ªå®¹å™¨ docker run --restart=alawys[on-failure:5] --name test -i -t centos /bin/bash docker update --restart=always \u003cCONTAINER ID\u003e docker rename name1 name2 docker create å®¹å™¨ä¸è¿è¡Œï¼Œæ›´ç»†ç²’åº¦çš„æ§åˆ¶ æœ¬åœ°æ— ï¼Œdocker hubä¸‹è½½é•œåƒ ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œæœ‰è‡ªå·±çš„netã€ipã€ç½‘æ¡¥ï¼› ç„¶åè¿›å…¥ä¸€ä¸ªæ–°çš„bashé¡µ ","date":"2021-08-08","objectID":"/01.docker-one/:0:2","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"3.ä½¿ç”¨ç¬¬ä¸€ä¸ªå®¹å™¨ docker ps -a æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ a.ä¸»æœºå hostname cat /etc/hosts b.ipä¿¡æ¯ docker æ¯é¸¡ ip a docker inspect hostName c.å®¹å™¨é‡Œå®‰è£…è½¯ä»¶åŒ… yum install vim d.é€€å‡º exit è¿™ä¸ªå®¹å™¨è¿˜åœ¨ï¼Œå›åˆ°å®¿ä¸»æœºådocker ps -a ","date":"2021-08-08","objectID":"/01.docker-one/:0:3","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"4.å¯åŠ¨å®¹å™¨ docker start dockername/dockerid ","date":"2021-08-08","objectID":"/01.docker-one/:0:4","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"5.é™„ç€åˆ°å®¹å™¨ docer attach name/id ","date":"2021-08-08","objectID":"/01.docker-one/:0:5","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"6.å®ˆæŠ¤å®¹å™¨ docker run --name daemon_test -d centos /bin/sh -c \"while true; do echo \"ehllo; sleep 2; done\" åå°è¿è¡Œ docker stop name/idï¼› ","date":"2021-08-08","objectID":"/01.docker-one/:0:6","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"7.docker logs docker logs -tf name docker logs --tail 1 -t name docker logs --tail - -f -t name ","date":"2021-08-08","objectID":"/01.docker-one/:0:7","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"8.docker Logé©±åŠ¨ docker run --log-driver=\"syslog\" ","date":"2021-08-08","objectID":"/01.docker-one/:0:8","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"9.è§‚å¯Ÿ docker inspect --format='{{ .State.Running }}' test1 ``` [22-root@localhost /var/lib/docker]# ll total 4 drwx------. 2 root root 24 Jun 13 00:15 builder drwx------. 4 root root 92 Jun 13 00:15 buildkit drwx------. 4 root root 150 Jun 16 00:07 containers drwx------. 3 root root 22 Jun 13 00:15 image drwxr-x---. 3 root root 19 Jun 13 00:15 network drwx------. 8 root root 4096 Jun 19 23:15 overlay2 drwx------. 4 root root 32 Jun 13 00:15 plugins drwx------. 2 root root 6 Jun 19 23:15 runtimes drwx------. 2 root root 6 Jun 13 00:15 swarm drwx------. 2 root root 6 Jun 19 23:15 tmp drwx------. 2 root root 6 Jun 13 00:15 trust drwx------. 2 root root 25 Jun 13 00:15 volumes [23-root@localhost /var/lib/docker]# cd containers/ [24-root@localhost /var/lib/docker/containers]# ll total 0 drwx------. 4 root root 237 Jun 19 23:15 901ab0e98300cc163901f94214f5ee69c962c685e098cf350db2c2d26c01ec9e drwx------. 4 root root 237 Jun 19 23:15 a6bc5cee2d394136c6f45d5ade6cad44a4a8be4cc851c3534c2a054b5acfbcc5 [25-root@localhost /var/lib/docker/containers ``` ","date":"2021-08-08","objectID":"/01.docker-one/:0:9","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"10.åˆ é™¤ docker rm name / [`sudo docker ps -q -a`] ","date":"2021-08-08","objectID":"/01.docker-one/:0:10","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"11.cmd docker rmi docker images ","date":"2021-08-08","objectID":"/01.docker-one/:0:11","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["docker"],"content":"12.å®¹å™¨å†…è¿è¡Œè¿›ç¨‹ docker exec -d name cmd[touch /data/test_exec] [14-root@localhost /var/lib/docker]# cd containers/ [15-root@localhost /var/lib/docker/containers ","date":"2021-08-08","objectID":"/01.docker-one/:0:12","tags":["docker"],"title":"docker - ç¬¬ä¸€ä¸ªå®¹å™¨","uri":"/01.docker-one/"},{"categories":["tpl"],"content":"Hugo - **æ¨¡æ¿** .","date":"2020-03-06","objectID":"/tpl/","tags":["tpl","æ¨¡æ¿"],"title":"tpl - mdæ¨¡æ¿æ–‡ä»¶","uri":"/tpl/"},{"categories":["tpl"],"content":"Hugo more- æ¨¡æ¿ ä½¿ç”¨ æ‘˜è¦-description, moreçš„ä¼˜å…ˆçº§æ›´é«˜. h3,h1 { background : lightgray; } h3:hover { color : red; } ","date":"2020-03-06","objectID":"/tpl/:0:0","tags":["tpl","æ¨¡æ¿"],"title":"tpl - mdæ¨¡æ¿æ–‡ä»¶","uri":"/tpl/"},{"categories":["tpl"],"content":"1.cloneä¸»é¢˜å¹¶æ›´æ–°é…ç½® 1.markdown ","date":"2020-03-06","objectID":"/tpl/:0:1","tags":["tpl","æ¨¡æ¿"],"title":"tpl - mdæ¨¡æ¿æ–‡ä»¶","uri":"/tpl/"},{"categories":["tpl"],"content":"2.link å¼•ç”¨,link å®˜æ–¹é“¾æ¥ ","date":"2020-03-06","objectID":"/tpl/:0:2","tags":["tpl","æ¨¡æ¿"],"title":"tpl - mdæ¨¡æ¿æ–‡ä»¶","uri":"/tpl/"},{"categories":["tpl"],"content":"3.å†…å®¹ç»„ç»‡ æ ‡ç­¾: - {{\u003c admonition note â€œæœ¬åœ°èµ„æºå¼•ç”¨â€ \u003e}} {{\u003c /admonition \u003e}} æ–‡æ¡£: vim themes/LoveIt/exampleSite/content/posts/theme-documentation-content/index.zh-cn.md æœ¬åœ°èµ„æºå¼•ç”¨ æœ‰ä¸‰ç§æ–¹æ³•æ¥å¼•ç”¨å›¾ç‰‡å’ŒéŸ³ä¹ç­‰æœ¬åœ°èµ„æº: ä½¿ç”¨é¡µé¢åŒ…ä¸­çš„é¡µé¢èµ„æº. ä½ å¯ä»¥ä½¿ç”¨é€‚ç”¨äº Resources.GetMatch çš„å€¼æˆ–è€…ç›´æ¥ä½¿ç”¨ç›¸å¯¹äºå½“å‰é¡µé¢ç›®å½•çš„æ–‡ä»¶è·¯å¾„æ¥å¼•ç”¨é¡µé¢èµ„æº. å°†æœ¬åœ°èµ„æºæ”¾åœ¨ assets ç›®å½•ä¸­, é»˜è®¤è·¯å¾„æ˜¯ /assets. å¼•ç”¨èµ„æºçš„æ–‡ä»¶è·¯å¾„æ˜¯ç›¸å¯¹äº assets ç›®å½•çš„. å°†æœ¬åœ°èµ„æºæ”¾åœ¨ static ç›®å½•ä¸­, é»˜è®¤è·¯å¾„æ˜¯ /static. å¼•ç”¨èµ„æºçš„æ–‡ä»¶è·¯å¾„æ˜¯ç›¸å¯¹äº static ç›®å½•çš„. å¼•ç”¨çš„ä¼˜å…ˆçº§ç¬¦åˆä»¥ä¸Šçš„é¡ºåº. åœ¨è¿™ä¸ªä¸»é¢˜ä¸­çš„å¾ˆå¤šåœ°æ–¹å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æœ¬åœ°èµ„æºå¼•ç”¨, ä¾‹å¦‚ é“¾æ¥, å›¾ç‰‡, image shortcode, music shortcode å’Œå‰ç½®å‚æ•°ä¸­çš„éƒ¨åˆ†å‚æ•°. é¡µé¢èµ„æºæˆ–è€… assets ç›®å½•ä¸­çš„å›¾ç‰‡å¤„ç†ä¼šåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¾—åˆ°æ”¯æŒ. éå¸¸é…·çš„åŠŸèƒ½! ","date":"2020-03-06","objectID":"/tpl/:0:3","tags":["tpl","æ¨¡æ¿"],"title":"tpl - mdæ¨¡æ¿æ–‡ä»¶","uri":"/tpl/"},{"categories":["tpl"],"content":"4.emoji ğŸ˜„ ","date":"2020-03-06","objectID":"/tpl/:0:4","tags":["tpl","æ¨¡æ¿"],"title":"tpl - mdæ¨¡æ¿æ–‡ä»¶","uri":"/tpl/"},{"categories":["tpl"],"content":"4.shortcut shortcutå®˜æ–¹ ä¹Ÿå¯ä»¥styleåŠ å…¥cssæ§åˆ¶ style link image admonition mermaid echarts bilibili... mapbox ","date":"2020-03-06","objectID":"/tpl/:0:5","tags":["tpl","æ¨¡æ¿"],"title":"tpl - mdæ¨¡æ¿æ–‡ä»¶","uri":"/tpl/"},{"categories":["tpl"],"content":"13.hugoè·å–èµ„æº,æ¯”å¦‚imag \u003ca href=https://gohugo.io/content-management/image-processing/#image-resources\u003eå®˜ç½‘é“¾æ¥\u003c/a\u003eimage resè·å–ä½ç½® \" å®˜ç½‘é“¾æ¥ å¿…é¡»indexå¼€å¤´çš„mdæ‰èƒ½è·å–å½“å‰ç›®å½•çš„æ–‡ä»¶,å¦åˆ™åº”è¯¥æ”¾åœ¨å…¨å±€ /asserts/images/ä¸‹; ä¸è¿‡å‰ç½®å‚æ•°resource.name .imageæ–¹å¼ä¸èƒ½è·å– ","date":"2020-03-06","objectID":"/tpl/:0:6","tags":["tpl","æ¨¡æ¿"],"title":"tpl - mdæ¨¡æ¿æ–‡ä»¶","uri":"/tpl/"},{"categories":null,"content":" Â LoveIt æ˜¯ä¸€ä¸ªç”± Dillon å¼€å‘çš„ç®€æ´ã€ä¼˜é›…ä¸”é«˜æ•ˆçš„ Hugo åšå®¢ä¸»é¢˜ã€‚ å®ƒçš„åŸå‹åŸºäº LeaveIt ä¸»é¢˜ å’Œ KeepIt ä¸»é¢˜ã€‚ Hugo ä¸»é¢˜ LoveItHugo ä¸»é¢˜ LoveIt \" Hugo ä¸»é¢˜ LoveIt ","date":"2019-08-02","objectID":"/about/:0:0","tags":null,"title":"å…³äº LoveIt","uri":"/about/"},{"categories":null,"content":"ç‰¹æ€§ æ€§èƒ½å’Œ SEO Â æ€§èƒ½ä¼˜åŒ–ï¼šåœ¨ Google PageSpeed Insights ä¸­ï¼Œ 99/100 çš„ç§»åŠ¨è®¾å¤‡å¾—åˆ†å’Œ 100/100 çš„æ¡Œé¢è®¾å¤‡å¾—åˆ† Â ä½¿ç”¨åŸºäº JSON-LD æ ¼å¼ çš„ SEO SCHEMA æ–‡ä»¶è¿›è¡Œ SEO ä¼˜åŒ– Â æ”¯æŒ Google Analytics Â æ”¯æŒ Fathom Analytics Â æ”¯æŒæœç´¢å¼•æ“çš„ç½‘ç«™éªŒè¯ (Google, Bind, Yandex and Baidu) Â æ”¯æŒæ‰€æœ‰ç¬¬ä¸‰æ–¹åº“çš„ CDN Â åŸºäº lazysizes è‡ªåŠ¨è½¬æ¢å›¾ç‰‡ä¸ºæ‡’åŠ è½½ å¤–è§‚å’Œå¸ƒå±€ / å“åº”å¼å¸ƒå±€ / æµ…è‰²/æ·±è‰² ä¸»é¢˜æ¨¡å¼ Â å…¨å±€ä¸€è‡´çš„è®¾è®¡è¯­è¨€ Â æ”¯æŒåˆ†é¡µ Â æ˜“ç”¨å’Œè‡ªåŠ¨å±•å¼€çš„æ–‡ç« ç›®å½• Â æ”¯æŒå¤šè¯­è¨€å’Œå›½é™…åŒ– Â ç¾è§‚çš„ CSS åŠ¨ç”» ç¤¾äº¤å’Œè¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Gravatar å¤´åƒ Â æ”¯æŒæœ¬åœ°å¤´åƒ Â æ”¯æŒå¤šè¾¾ 64 ç§ç¤¾äº¤é“¾æ¥ Â æ”¯æŒå¤šè¾¾ 28 ç§ç½‘ç«™åˆ†äº« Â æ”¯æŒ Disqus è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Gitalk è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Valine è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Facebook è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Telegram comments è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Commento è¯„è®ºç³»ç»Ÿ Â æ”¯æŒ Utterances è¯„è®ºç³»ç»Ÿ æ‰©å±•åŠŸèƒ½ Â æ”¯æŒåŸºäº Lunr.js æˆ– algolia çš„æœç´¢ Â æ”¯æŒ Twemoji Â æ”¯æŒä»£ç é«˜äº® Â ä¸€é”®å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ Â æ”¯æŒåŸºäº lightgallery.js çš„å›¾ç‰‡ç”»å»Š Â æ”¯æŒ Font Awesome å›¾æ ‡çš„æ‰©å±• Markdown è¯­æ³• Â æ”¯æŒä¸Šæ ‡æ³¨é‡Šçš„æ‰©å±• Markdown è¯­æ³• Â æ”¯æŒåˆ†æ•°çš„æ‰©å±• Markdown è¯­æ³• Â æ”¯æŒåŸºäº $ \\KaTeX $ çš„æ•°å­¦å…¬å¼ Â æ”¯æŒåŸºäº mermaid çš„å›¾è¡¨ shortcode Â æ”¯æŒåŸºäº ECharts çš„äº¤äº’å¼æ•°æ®å¯è§†åŒ– shortcode Â æ”¯æŒåŸºäº Mapbox GL JS çš„ Mapbox shortcode Â æ”¯æŒåŸºäº APlayer å’Œ MetingJS çš„éŸ³ä¹æ’­æ”¾å™¨ shortcode Â æ”¯æŒ Bilibili è§†é¢‘ shortcode Â æ”¯æŒå¤šç§æ³¨é‡Šçš„ shortcode Â æ”¯æŒè‡ªå®šä¹‰æ ·å¼çš„ shortcode Â æ”¯æŒè‡ªå®šä¹‰è„šæœ¬çš„ shortcode Â æ”¯æŒåŸºäº TypeIt çš„æ‰“å­—åŠ¨ç”» shortcode Â æ”¯æŒåŸºäº Smooth Scroll çš„æ»šåŠ¨åŠ¨ç”» Â æ”¯æŒåŸºäº cookieconsent çš„ Cookie è®¸å¯æ¨ªå¹… â€¦ ","date":"2019-08-02","objectID":"/about/:0:1","tags":null,"title":"å…³äº LoveIt","uri":"/about/"},{"categories":null,"content":"è®¸å¯åè®® LoveIt æ ¹æ® MIT è®¸å¯åè®®æˆæƒã€‚ æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ LICENSE æ–‡ä»¶ã€‚ LoveIt ä¸»é¢˜ä¸­ç”¨åˆ°äº†ä»¥ä¸‹é¡¹ç›®ï¼Œæ„Ÿè°¢å®ƒä»¬çš„ä½œè€…ï¼š normalize.css Font Awesome Simple Icons Animate.css Smooth Scroll autocomplete.js Lunr.js algoliasearch lazysizes object-fit-images Twemoji lightgallery.js clipboard.js Sharer.js TypeIt $ \\KaTeX $ mermaid ECharts Mapbox GL JS APlayer MetingJS Gitalk Valine cookieconsent ","date":"2019-08-02","objectID":"/about/:0:2","tags":null,"title":"å…³äº LoveIt","uri":"/about/"}]